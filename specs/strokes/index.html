<!DOCTYPE html>

<!--
  SVG Strokes

  Note: This document is generated from ../master/Overview.html.
  Run "make" from the root of the repository to regenerate it.
  -->

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head><meta charset="UTF-8"/>
  <title>SVG Strokes</title>
  
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>
  
  
  <style>.svg2-requirement { display: none !important; }</style>
<link rel="stylesheet" title="Default" href="style/default_no_maturity.css" type="text/css" media="screen"/><link rel="alternate stylesheet" title="No issues/annotations" href="style/default_no_issues.css" type="text/css" media="screen"/><link rel="stylesheet" href="//www.w3.org/StyleSheets/TR/2016/W3C-ED" type="text/css" media="screen"/><script src="style/link-fixup.js"></script><script data-script-mathjax="" async="" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_SVG"></script></head>
<body class="chapter-Overview">

<div class="head">
  <p><a href="https://www.w3.org/"><img height="48" width="72" alt="W3C" src="https://www.w3.org/Icons/w3c_home"/></a></p>
  <h1 id="pagetitle">SVG Strokes</h1>
  <h2 id="pagesubtitle">W3C Editor’s Draft <em>17 September 2025</em></h2>
  <dl>
    <dt>This version:</dt>
    <dd><a href="https://svgwg.org/specs/strokes/" class="url">https://svgwg.org/specs/strokes/</a></dd>
    <dt>Latest version:</dt>
    <dd><a href="http://www.w3.org/TR/svg-strokes/" class="url">http://www.w3.org/TR/svg-strokes/</a></dd>
    
    <!--
    <dt>Previous version:</dt>
    <dd><edit:previousversion/></dd>
    -->
    <dt>GitHub repository:</dt>
    <dd><a href="https://github.com/w3c/svgwg/tree/main/specs/strokes">https://github.com/w3c/svgwg/tree/main/specs/strokes</a></dd>
    <dt>Feedback:</dt>
    <dd><a href="mailto:www-svg@w3.org" class="url">www-svg@w3.org</a> with subject line “<code>[svg-strokes] … <i>message topic</i> …</code>” (<a href="https://lists.w3.org/Archives/Public/www-svg/">archive</a>)</dd>
    <dt class="top-editors">Editors:</dt>
    <dd>Cameron McCormack, Mozilla Corporation &lt;<a href="mailto:cam@mcc.id.au" class="url">cam@mcc.id.au</a>></dd>
    <dd>Dirk Schulze, Adobe Systems &lt;<a href="mailto:dschulze@adobe.com" class="url">dschulze@adobe.com</a>></dd>
  </dl>
  <p class="copyright"><a href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> © 2025 <a href="http://www.w3.org/"><abbr title="World Wide Web Consortium">W3C</abbr></a><sup>®</sup> (<a href="http://www.csail.mit.edu/"><abbr title="Massachusetts Institute of Technology">MIT</abbr></a>, <a href="http://www.ercim.eu/"><abbr title="European Research Consortium for Informatics and Mathematics">ERCIM</abbr></a>, <a href="http://www.keio.ac.jp/">Keio</a>, <a href="http://ev.buaa.edu.cn/">Beihang</a>). W3C <a href="http://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>, <a href="http://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> and <a href="http://www.w3.org/Consortium/Legal/copyright-documents">document use</a> rules apply.</p>
</div>

<hr/>

<h2 id="abstract">Abstract</h2>

<p>This specification defines properties for controlling the appearance
of strokes painted for SVG shapes.</p>

<h2 id="status">Status of This Document</h2>

<p><em>This section describes the status of this document at the time of its
publication. Other documents may supersede this document. A list of current W3C
publications and the latest revision of this technical report can be found in
the <a href="https://www.w3.org/TR/">W3C technical reports index</a> at https://www.w3.org/TR/</em>.</p>

<p>This document is the 17 September 2025 <strong>Editor’s Draft</strong> of SVG Strokes.
The purpose of this specification is to define a number of improved SVG stroking
features.</p>

<p class="note">This specification is an early draft that largely contains
features that were dropped during the development of SVG 2.
In the future, this specification will supercede the
<a href="https://www.w3.org/TR/SVG2/painting.html#StrokeProperties">SVG 2 Stroke definition</a>,
however at this time the <a href="https://www.w3.org/TR/SVG2/painting.html#StrokeProperties">SVG 2 Stroke definition</a>
must be considered the normative definition.</p>

<p>Comments on this Editor’s Draft are welcome.
Comments can be sent to <a href="mailto:www-svg@w3.org" class="url">www-svg@w3.org</a>,
the public email list for issues related to vector graphics on the Web. This list is
<a href="https://lists.w3.org/Archives/Public/www-svg/">archived</a> and
senders must agree to have their message publicly archived from their
first posting. To subscribe send an email to
<a href="mailto:www-svg-request@w3.org" class="url">www-svg-request@w3.org</a> with
the word <code>subscribe</code> in the subject line.</p>

<p>This document has been produced by the
<a href="https://www.w3.org/Graphics/SVG/WG">W3C SVG Working Group</a> as part of
the <a href="https://www.w3.org/Graphics/Activity">Graphics Activity</a> within
the <a href="https://www.w3.org/Interaction/">W3C Interaction Domain</a>. The
goals of the W3C SVG Working Group are discussed in the
<a href="https://www.w3.org/Graphics/SVG/svg-2019.html">W3C SVG Charter</a>.
The W3C SVG Working Group maintains a public Web page,
<a href="https://www.w3.org/Graphics/SVG/" class="url">https://www.w3.org/Graphics/SVG/</a>,
that contains further background information. The authors of
this document are the SVG Working Group participants.</p>

<p>This document was produced by a group operating under the
<a href="https://www.w3.org/Consortium/Patent-Policy-20040205/">5 February 2004 W3C Patent Policy</a>.
W3C maintains a <a rel="disclosure" href="https://www.w3.org/2004/01/pp-impl/19480/status">public list of any patent disclosures</a>
made in connection with the deliverables of the group; that page also includes
instructions for disclosing a patent. An individual who has actual knowledge of
a patent which the individual believes contains
<a href="https://www.w3.org/Consortium/Patent-Policy-20040205/#def-essential">Essential Claim(s)</a>
must disclose the information in accordance with
<a href="https://www.w3.org/Consortium/Patent-Policy-20040205/#sec-Disclosure">section 6 of the W3C Patent Policy</a>.</p>

<p>Publication as a Editor’s Draft does not imply endorsement by the W3C Membership.
This is a draft document and may be updated, replaced or obsoleted by other documents
at any time. It is inappropriate to cite this document as other than work in progress.</p>

<p>A list of current W3C Recommendations and other technical documents can be found at
<a href="https://www.w3.org/TR/" class="url">https://www.w3.org/TR/</a>. W3C publications
may be updated, replaced, or obsoleted by other documents at any time.</p>

<p>This document is governed by the
<a id="w3c_process_revision" href="https://www.w3.org/2014/Process-20140801/">1 August 2014 W3C Process Document</a>.</p>

<!--
<h2 id="feedback" edit:toc="no">How to read this document and give feedback</h2>

<p>This draft of SVG Integration introduces new normative prose for
integrating the SVG language into other markup languages. One of
the goals is that this specification can be re-used more easily by
other specifications that want to have well-defined interaction and
interoperability with SVG. Future drafts of this specification may
introduce syntax and markup for the SVG language that may not be
backwards compatible with older SVG User Agents, and the use of this
syntax should be accompanied by a fallback using the <a>'switch'</a>
element.</p>
-->

<nav id="toc">
  <h2 class="no-num no-toc no-ref" id="contents">Table of Contents</h2>

<ol class="toc"><li><a href="#intro"><span class="secno">1.</span> Introduction</a><ol class="toc"><li><a href="#placement"><span class="secno">1.1.</span> Module interactions</a></li></ol></li><li><a href="#StrokeProperties"><span class="secno">2.</span> Stroke properties</a><ol class="toc"><li><a href="#SpecifyingStrokePaint"><span class="secno">2.1.</span> Specifying stroke paint: the ‘<span class="property">stroke</span>’
property</a></li><li><a href="#SpecifyingStrokeAlignment"><span class="secno">2.2.</span> Specifying stroke alignment: the ‘<span class="property">stroke-alignment</span>’
property</a></li><li><a href="#StrokeOpacity"><span class="secno">2.3.</span> Stroke paint opacity: the ‘<span class="property">stroke-opacity</span>’
property</a></li><li><a href="#StrokeWidth"><span class="secno">2.4.</span> Stroke width: the ‘<span class="property">stroke-width</span>’
property</a></li><li><a href="#LineCaps"><span class="secno">2.5.</span> Drawing caps at the ends of strokes: the ‘<span class="property">stroke-linecap</span>’
property</a></li><li><a href="#LineJoin"><span class="secno">2.6.</span> Controlling line joins: the ‘<span class="property">stroke-linejoin</span>’
and ‘<span class="property">stroke-miterlimit</span>’ properties</a></li><li><a href="#StrokeDashing"><span class="secno">2.7.</span> Dashing strokes: the ‘<span class="property">stroke-dasharray</span>’,
‘<span class="property">stroke-dashoffset</span>’, ‘<span class="property">stroke-dashcorner</span>’
and ‘<span class="property">stroke-dashadjust</span>’ properties</a></li></ol></li><li><a href="#StrokeShape"><span class="secno">3.</span> Computing the shape of the stroke</a><ol class="toc"><li><a href="#CurvatureCalculation"><span class="secno">3.1.</span> Computing the circles for the <span class="prop-value">arcs</span>
'stroke-linejoin'</a></li></ol></li><li><a href="#refs"><span class="secno">4.</span> References</a><ol class="toc"><li><a href="#normrefs"><span class="secno">4.1.</span> Normative references</a></li></ol></li><li><a href="#ChangesSinceSVG2"><span class="secno">5.</span> Changes since SVG 2</a></li></ol>
  <script src="https://www.w3.org/scripts/TR/2016/fixup.js"></script>
</nav>

<h2 id="intro" class="heading">1. Introduction<a class="self-link" href="#intro"></a></h2>

<p><em>This section is non-normative.</em></p>

<p>SVG graphical elements that define a shape – <span class="element-name">‘<a href="https://svgwg.org/svg2-draft/paths.html#PathElement"><span>path</span></a>’</span> elements, <a href="https://svgwg.org/svg2-draft/shapes.html#TermBasicShapeElement">basic shapes</a>,
and <a href="https://svgwg.org/svg2-draft/text.html#TermTextContentElement">text content elements</a> – are rendered by being <strong>filled</strong>,
which is painting the interior of the object, and <strong>stroked</strong>, which is
painting along the outline of the object.</p>

<p>This specification describes how SVG graphical elements are stroked, by
<a href="#StrokeProperties">defining a number of properties</a> that control the appearance of a stroke
and by <a href="#StrokeShape">specifying the shape of an element's stroke</a>.</p>

<p class="issue" data-issue="1" id="issue1"><a class="self-link" href="#issue1"></a>SVG 2 supports multiple strokes, which we will need updated
wording to handle in this specification.</p>

<h3 id="placement" class="heading">1.1. Module interactions<a class="self-link" href="#placement"></a></h3>

<p>This module replaces and extends the definition of stroking properties in
SVG 2 (the "Stroke properties" section in the "Painting: Filling, Stroking and Marker Symbols"
chapter). <a href="#ref-SVG2">[SVG2]</a></p>


<h2 id="StrokeProperties" class="heading">2. Stroke properties<a class="self-link" href="#StrokeProperties"></a></h2>

<p>In this section, we define a number of properties that allow the
author to control different aspects of a stroke, including its paint,
thickness, position, use of dashing, and joining and capping of
path segments.</p>

<p>In all cases, all stroking properties which are affected by
directionality, such as those having to do with dash patterns, must be
rendered such that the stroke operation starts at the same point at
which the graphics element starts. In particular, for <span class="element-name">‘<a href="https://svgwg.org/svg2-draft/paths.html#PathElement"><span>path</span></a>’</span>
elements, the start of the path is the first point of the initial
"moveto" command.</p>

<p>For stroking properties such as dash patterns whose computations
are dependent on progress along the outline of the graphics element,
distance calculations are required to utilize the SVG user agent's
standard <a href="https://svgwg.org/svg2-draft/paths.html#DistanceAlongAPath">Distance along a path</a>
algorithms.</p>

<p>When stroking is performed using a complex paint server, such as a
gradient or a pattern, the stroke operation must be identical to the
result that would have occurred if the geometric shape defined by the
geometry of the current graphics element and its associated stroking
properties were converted to an equivalent <span class="element-name">‘<a href="https://svgwg.org/svg2-draft/paths.html#PathElement"><span>path</span></a>’</span> element and
then filled using the given paint server.</p>

<h3 id="SpecifyingStrokePaint" class="heading">2.1. Specifying stroke paint: the ‘<span class="property">stroke</span>’
property<a class="self-link" href="#SpecifyingStrokePaint"></a></h3>

<table class="propdef">
  <tr>
    <th>Name:</th>
    <td><dfn id="StrokeProperty">stroke</dfn></td>
  </tr>
  <tr>
    <th>Value:</th>
    <td><a href="https://svgwg.org/svg2-draft/painting.html#SpecifyingPaint">&lt;paint></a></td>
  </tr>
  <tr>
    <th>Initial:</th>
    <td>none</td>
  </tr>
  <tr>
    <th>Applies to:</th>
    <td><a href="https://svgwg.org/svg2-draft/shapes.html#TermShapeElement">shapes</a> and <a href="https://svgwg.org/svg2-draft/text.html#TermTextContentElement">text content elements</a></td>
  </tr>
  <tr>
    <th>Inherited:</th>
    <td>yes</td>
  </tr>
  <tr>
    <th>Percentages:</th>
    <td>N/A</td>
  </tr>
  <tr>
    <th>Media:</th>
    <td>visual</td>
  </tr>
  <tr>
    <th>Computed value:</th>
    <td>as specified, but with <a href="https://www.w3.org/TR/css3-values/#colors">&lt;color></a> values computed and
    <a href="https://www.w3.org/TR/css3-values/#url-value">&lt;url></a> values made absolute</td>
  </tr>
  <tr>
    <th><a href="https://svgwg.org/specs/animations/#Animatable">Animatable</a>:</th>
    <td>yes</td>
  </tr>
</table>

<p>The <a class="property" href="#StrokeProperty">stroke</a> property paints along the outline of the given
graphical element.</p>

<p>A subpath (see <a href="https://svgwg.org/svg2-draft/paths.html">Paths</a>) consisting of
a single <a href="https://svgwg.org/svg2-draft/paths.html#PathDataMovetoCommands">moveto</a>
shall not be stroked. Any zero length subpath shall not be
stroked if the <a class="property" href="#StrokeLinecapProperty">stroke-linecap</a> property has a value of
<span class="prop-value">butt</span> but shall be stroked if the
<a class="property" href="#StrokeLinecapProperty">stroke-linecap</a> property has a value of
<span class="prop-value">round</span> or <span class="prop-value">square</span>,
producing respectively a circle or a square centered at the given point.
Examples of zero length subpaths include
<span class="attr-value">'M 10,10 L 10,10'</span>,
<span class="attr-value">'M 20,20 h 0'</span>,
<span class="attr-value">'M 30,30 z'</span> and
<span class="attr-value">'M 40,40 c 0,0 0,0 0,0'</span>.</p>

<p class="issue" data-issue="2" id="issue2"><a class="self-link" href="#issue2"></a>The above paragraph should be redundant with the stroke
shape computation requirements below.  In this section, we should phrase
the requirements descriptively rather than normatively.</p>

<div class="annotation svg2-requirement">
  <table>
    <tr>
      <th>SVG 2 Requirement:</th>
      <td>Include a way to specify stroke position.</td>
    </tr>
    <tr>
      <th>Resolution:</th>
      <td><a href="https://www.w3.org/2011/10/28-svg-irc#T18-09-48">SVG 2 shall include a way to specify stroke position.</a></td>
    </tr>
    <tr>
      <th>Purpose:</th>
      <td>To allow a stroke to be inside or outside the path.</td>
    </tr>
    <tr>
      <th>Owner:</th>
      <td>Cameron (<a href="https://www.w3.org/Graphics/SVG/WG/track/actions/3162">ACTION-3162</a>)</td>
    </tr>
    <tr>
      <th>Note:</th>
      <td>See <a href="https://www.w3.org/Graphics/SVG/WG/wiki/Proposals/Stroke_position">proposal page</a>.</td>
    </tr>
  </table>
</div>

<h3 id="SpecifyingStrokeAlignment" class="heading">2.2. Specifying stroke alignment: the ‘<span class="property">stroke-alignment</span>’
property<a class="self-link" href="#SpecifyingStrokeAlignment"></a></h3>

<table class="propdef">
  <tr>
    <th>Name:</th>
    <td><dfn id="StrokeAlignmentProperty">stroke-alignment</dfn></td>
  </tr>
  <tr>
    <th>Value:</th>
    <td>center | inner | outer</td>
  </tr>
  <tr>
    <th>Initial:</th>
    <td>center</td>
  </tr>
  <tr>
    <th>Applies to:</th>
    <td><a href="https://svgwg.org/svg2-draft/shapes.html#TermShapeElement">shapes</a> and <a href="https://svgwg.org/svg2-draft/text.html#TermTextContentElement">text content elements</a></td>
  </tr>
  <tr>
    <th>Inherited:</th>
    <td>yes</td>
  </tr>
  <tr>
    <th>Percentages:</th>
    <td>N/A</td>
  </tr>
  <tr>
    <th>Media:</th>
    <td>visual</td>
  </tr>
  <tr>
    <th>Computed value:</th>
    <td>as specified</td>
  </tr>
  <tr>
    <th><a href="https://svgwg.org/specs/animations/#Animatable">Animatable</a>:</th>
    <td>yes</td>
  </tr>
</table>

<p>This property allows the author to align a stroke along the outline of the current object.</p>

<dl>
  <dt><span class="prop-value">center</span></dt>
  <dd>
    <p>This value indicates that the stroke for each subpath is positioned along the
    outline of the current stroke. The extends of the stroke increase to both sides
    of the outline accordingly dependent on the <a class="property" href="#StrokeWidthProperty">stroke-width</a>.</p>
  </dd>

  <dt><span class="prop-value">inner</span></dt>
  <dd>
    <p>This value indicates that the stroke area is defined by the outline of each
    subpath of the current object and the computed value of the <a class="property" href="#StrokeWidthProperty">stroke-width</a>
    property as offset orthogonal from the outline into the fill area of each subpath.</p>
    <p>The <a class="property" href="#StrokeLinejoinProperty">stroke-linejoin</a> property must be ignored.</p>
  </dd>

  <dt><span class="prop-value">outer</span></dt>
  <dd>
    <p>This value indicates that the stroke area is defined by the outline of each
    subpath of the current object and the computed value of the <a class="property" href="#StrokeWidthProperty">stroke-width</a>
    property as offset orthogonal from the outline away from the fill area of each subpath.</p>
  </dd>
</dl>

<p>The fill area of the current object is defined by the <a class="property" href="https://svgwg.org/svg2-draft/painting.html#FillRuleProperty">fill-rule</a> property.</p>

<p class="issue" data-issue="4" id="issue4"><a class="self-link" href="#issue4"></a>Does that require updates on the stroke computation?</p>

<div class="issue" data-issue="5" id="issue5"><a class="self-link" href="#issue5"></a>How does this apply to open path
  segments? One suggestion is to alias 'outside' to 'left' and
  'inside' to 'right' for open paths. How are end caps handled?
  <div class="figure">
    <img class="bordered" src="images/stroke-alignment-openpath.svg" alt=""/>
    <p class="caption">
      PART OF ABOVE ISSUE: From top to bottom:
      1. Stroke with 'stroke-alignment' 'center' value.
      2. Fill region.
      3. Stroke with 'stroke-alignment' 'inside' value per spec (? stroke only paints inside fill region).
      4. Stroke with 'stroke-alignment' 'outside' value (implemented by blocking out fill region).
      5. Stroke with 'stroke-alignment' 'inside' value, alternative interpretation.
      6. Stroke with 'stroke-alignment' 'outside' value per spec (?).
      7. Stroke with 'stroke-alignment' alternative 'left' value; pink shows round line-cap.
    </p>
  </div>
</div>

<div class="issue" data-issue="6" id="issue6"><a class="self-link" href="#issue6"></a>How does this apply to paths with
  loops?  Is the region inside the red circle in the below figure part
  of the stroked (as shown)?  Are internal edges stroked if the fill
  rule is 'nonzero'; if so how? (Shown without stroking below.)

  <div class="figure">
    <img class="bordered" src="images/stroke-alignment-loops.svg" alt=""/>
    <p class="caption">
      PART OF ABOVE ISSUE:
      Top row:
      Normal stroke.
      Stroke left.
      Stroke right.
      Middle row:
      Fill rule 'nonzero', no stroke.
      Stroke outside.
      Stroke inside.
      Bottom row:
      Fill rule 'evenodd', no stroke.
      Stroke outside.
      Stroke inside.
    </p>
  </div>
</div>

<div class="issue" data-issue="7" id="issue7"><a class="self-link" href="#issue7"></a>How are dashes handled? Are they based on original path?
  <div class="figure">
    <img class="bordered" src="images/stroke-alignment-dashes.svg" alt=""/>
    <p class="caption">
      PART OF ABOVE ISSUE: From left to right:
      1. Normal dash pattern.
      2. Dash pattern based on dash pattern or original path. Note light-gray region which is from <q>inside</q> dash part (simply using clipping path does not yield proper result).
      3. Dash pattern based on center of offset path. Light gray represents dash pattern based on center of inset path.
    </p>
  </div>
</div>

<div class="annotation svg2-requirement">
  <table>
    <tr>
      <th>SVG 2 Requirement:</th>
      <td>Allow more author control over positions of dashes.</td>
    </tr>
    <tr>
      <th>Resolution:</th>
      <td><a href="https://www.w3.org/2011/10/28-svg-irc#T18-17-51">SVG 2 shall allow more author control over positions of dashes.</a></td>
    </tr>
    <tr>
      <th>Purpose:</th>
      <td>To allow things like aligning dashes at rectangle corners or along paths, needed for mapping.</td>
    </tr>
    <tr>
      <th>Owner:</th>
      <td>Cameron (<a href="https://www.w3.org/Graphics/SVG/WG/track/actions/3163">ACTION-3163</a>)</td>
    </tr>
    <tr>
      <th>Note:</th>
      <td>See <a href="https://www.w3.org/Graphics/SVG/WG/wiki/Proposals/Stroke_dash_adjustment">proposal page</a>.</td>
    </tr>
  </table>
</div>

<h3 id="StrokeOpacity" class="heading">2.3. Stroke paint opacity: the ‘<span class="property">stroke-opacity</span>’
property<a class="self-link" href="#StrokeOpacity"></a></h3>

<table class="propdef">
  <tr>
    <th>Name:</th>
    <td><dfn id="StrokeOpacityProperty">stroke-opacity</dfn></td>
  </tr>
  <tr>
    <th>Value:</th>
    <td><a href="https://www.w3.org/TR/css3-values/#numbers">&lt;number></a></td>
  </tr>
  <tr>
    <th>Initial:</th>
    <td>1</td>
  </tr>
  <tr>
    <th>Applies to:</th>
    <td><a href="https://svgwg.org/svg2-draft/shapes.html#TermShapeElement">shapes</a> and <a href="https://svgwg.org/svg2-draft/text.html#TermTextContentElement">text content elements</a></td>
  </tr>
  <tr>
    <th>Inherited:</th>
    <td>yes</td>
  </tr>
  <tr>
    <th>Percentages:</th>
    <td>N/A</td>
  </tr>
  <tr>
    <th>Media:</th>
    <td>visual</td>
  </tr>
  <tr>
    <th>Computed value:</th>
    <td>as specified, but clamped to the range [0, 1]</td>
  </tr>
  <tr>
    <th><a href="https://svgwg.org/specs/animations/#Animatable">Animatable</a>:</th>
    <td>yes</td>
  </tr>
</table>

<p>The <a class="property" href="#StrokeOpacityProperty">stroke-opacity</a> property specifies the opacity of the
painting operation used to stroke the current object.  (See
<a href="https://svgwg.org/svg2-draft/render.html#PaintingShapesAndText">Painting shapes and text</a>.)
As with <a class="property" href="https://svgwg.org/svg2-draft/painting.html#FillOpacityProperty">fill-opacity</a>, a value of 0 means fully transparent, and a value of 1
means fully opaque.</p>

<p class="note">See also the <a class="property" href="https://svgwg.org/svg2-draft/render.html#ObjectAndGroupOpacityProperties">opacity</a> property, which specifies
group opacity.</p>

<h3 id="StrokeWidth" class="heading">2.4. Stroke width: the ‘<span class="property">stroke-width</span>’
property<a class="self-link" href="#StrokeWidth"></a></h3>

<table class="propdef">
  <tr>
    <th>Name:</th>
    <td><dfn id="StrokeWidthProperty">stroke-width</dfn></td>
  </tr>
  <tr>
    <th>Value:</th>
    <td><a href="https://www.w3.org/TR/css3-values/#percentages">&lt;percentage></a> | <a href="https://www.w3.org/TR/css3-values/#lengths">&lt;length></a></td>
  </tr>
  <tr>
    <th>Initial:</th>
    <td>1px</td>
  </tr>
  <tr>
    <th>Applies to:</th>
    <td><a href="https://svgwg.org/svg2-draft/shapes.html#TermShapeElement">shapes</a> and <a href="https://svgwg.org/svg2-draft/text.html#TermTextContentElement">text content elements</a></td>
  </tr>
  <tr>
    <th>Inherited:</th>
    <td>yes</td>
  </tr>
  <tr>
    <th>Percentages:</th>
    <td>refer to the size of the current viewport (see <a href="https://svgwg.org/svg2-draft/coords.html#Units">Units</a>)</td>
  </tr>
  <tr>
    <th>Media:</th>
    <td>visual</td>
  </tr>
  <tr>
    <th>Computed value:</th>
    <td>absolute length or percentage</td>
  </tr>
  <tr>
    <th><a href="https://svgwg.org/specs/animations/#Animatable">Animatable</a>:</th>
    <td>yes</td>
  </tr>
</table>

<p>This property specifies the width of the stroke on the current object.
A zero value causes no stroke to be painted. A negative value
is <a href="https://svgwg.org/svg2-draft/types.html#TermInvalidValue">invalid</a>.</p>

<h3 id="LineCaps" class="heading">2.5. Drawing caps at the ends of strokes: the ‘<span class="property">stroke-linecap</span>’
property<a class="self-link" href="#LineCaps"></a></h3>

<table class="propdef">
  <tr>
    <th>Name:</th>
    <td><dfn id="StrokeLinecapProperty">stroke-linecap</dfn></td>
  </tr>
  <tr>
    <th>Value:</th>
    <td>butt | round | square</td>
  </tr>
  <tr>
    <th>Initial:</th>
    <td>butt</td>
  </tr>
  <tr>
    <th>Applies to:</th>
    <td><a href="https://svgwg.org/svg2-draft/shapes.html#TermShapeElement">shapes</a> and <a href="https://svgwg.org/svg2-draft/text.html#TermTextContentElement">text content elements</a></td>
  </tr>
  <tr>
    <th>Inherited:</th>
    <td>yes</td>
  </tr>
  <tr>
    <th>Percentages:</th>
    <td>N/A</td>
  </tr>
  <tr>
    <th>Media:</th>
    <td>visual</td>
  </tr>
  <tr>
    <th>Computed value:</th>
    <td>as specified</td>
  </tr>
  <tr>
    <th><a href="https://svgwg.org/specs/animations/#Animatable">Animatable</a>:</th>
    <td>yes</td>
  </tr>
</table>

<p><a class="property" href="#StrokeLinecapProperty">stroke-linecap</a> specifies the shape to be used at the end of
open subpaths when they are stroked.  The possible values are:</p>

<dl>
  <dt><span class="prop-value">butt</span></dt>
  <dd>This value indicates that the stroke for each subpath does not
  extend beyond its two endpoints.  A zero length subpath will therefore
  not have any stroke.</dd>

  <dt><span class="prop-value">round</span></dt>
  <dd>
    <p>This value indicates that at each end of each subpath, the shape
    representing the stroke will be extended by a half circle with a radius equal
    to the stroke width.  If a subpath has zero length, then the resulting
    effect is that the stroke for that subpath consists solely of a full circle
    centered at the subpath's point.</p>
  </dd>

  <dt><span class="prop-value">square</span></dt>
  <dd>
    <p>This value indicates that at the end of each subpath, the shape
    representing the stroke will be extended by a rectangle with the
    same width as the stroke width and whose length is half of the stroke width.
    If a subpath has zero length, then the resulting effect is that the
    stroke for that subpath consists solely of a square with side length
    equal to the stroke width, centered at the subpath's point, and oriented
    such that two of its sides are parallel to the effective tangent
    at that subpath's point.  See
    <a href="https://svgwg.org/svg2-draft/paths.html#PathElementImplementationNotes"><span class="element-name">‘path’</span>
    element implementation notes</a> for details on how to determine the tangent
    at a zero-length subpath.</p>
  </dd>
</dl>

<div class="figure">
  <img class="bordered" src="images/linecap.svg" alt="Image showing three paths, each with a different line cap."/>
  <p class="caption">The three types of line caps.</p>
</div>

<p>See the definition of the <a href="#TermCapShape">cap shape</a> below for a more precise
description of the shape a line cap will have.</p>

<h3 id="LineJoin" class="heading">2.6. Controlling line joins: the ‘<span class="property">stroke-linejoin</span>’
and ‘<span class="property">stroke-miterlimit</span>’ properties<a class="self-link" href="#LineJoin"></a></h3>

<table class="propdef">
  <tr>
    <th>Name:</th>
    <td><dfn id="StrokeLinejoinProperty">stroke-linejoin</dfn></td>
  </tr>
  <tr>
    <th>Value:</th>
    <td>miter | miter-clip | round | bevel | arcs </td>
  </tr>
  <tr>
    <th>Initial:</th>
    <td>miter</td>
  </tr>
  <tr>
    <th>Applies to:</th>
    <td><a href="https://svgwg.org/svg2-draft/shapes.html#TermShapeElement">shapes</a> and <a href="https://svgwg.org/svg2-draft/text.html#TermTextContentElement">text content elements</a></td>
  </tr>
  <tr>
    <th>Inherited:</th>
    <td>yes</td>
  </tr>
  <tr>
    <th>Percentages:</th>
    <td>N/A</td>
  </tr>
  <tr>
    <th>Media:</th>
    <td>visual</td>
  </tr>
  <tr>
    <th>Computed value:</th>
    <td>as specified</td>
  </tr>
  <tr>
    <th><a href="https://svgwg.org/specs/animations/#Animatable">Animatable</a>:</th>
    <td>yes</td>
  </tr>
</table>

<p><a class="property" href="#StrokeLinejoinProperty">stroke-linejoin</a> specifies the shape to be used at the
corners of paths or basic shapes when they are stroked. For further details see
the <a href="https://svgwg.org/svg2-draft/paths.html#PathElementImplementationNotes">path implementation notes</a>.</p>

<dl>
  <dt><span class="prop-value">miter</span></dt>
  <dd>This value indicates that a sharp corner is to be used to join path segments.
  The corner is formed by extending the outer edges of the stroke at the tangents
  of the path segments until they intersect. If the <a class="property" href="#StrokeMiterlimitProperty">stroke-miterlimit</a>
  is exceeded, the line join falls back to <span class="prop-value">bevel</span>
  (see below).</dd>

  <dt><span class="prop-value">miter-clip</span></dt>
  <dd>This value is the same as <span class="prop-value">miter</span> but if
    the <a class="property" href="#StrokeMiterlimitProperty">stroke-miterlimit</a> is exceeded, the miter is clipped at a
    miter length equal to the <a class="property" href="#StrokeMiterlimitProperty">stroke-miterlimit</a> value multiplied
    by the stroke width (see below).</dd>

  <dt><span class="prop-value">round</span></dt>
  <dd>This value indicates that a round corner is to be used to join path segments.
  The corner is a circular sector centered on the join point.</dd>

  <dt><span class="prop-value">bevel</span></dt>
  <dd>This value indicates that a bevelled corner is to be used to join path segments.
  The bevel shape is a triangle that fills the area between the two stroked segments.</dd>

  <dt><span class="prop-value">arcs</span></dt>
  <dd>This value indicates that an arcs corner is to be used to join
    path segments. The arcs shape is formed by extending the outer
    edges of the stroke at the join point with arcs that have the same
    curvature as the outer edges at the join point.</dd>
</dl>

<p class="note">
  The <span class="prop-value">miter-clip</span> and
  <span class="prop-value">arcs</span> values are new in SVG 2.
  The <span class="prop-value">miter-clip</span> value offers a more
  consistent presentation for a path with multiple joins as well as
  better behavior when a path is animated.
  The <span class="prop-value">arcs</span> value provides a better
  looking join when the path segments at the join are curved.
</p>

<p class="annotation">
  Adding 'arcs' line join was resolved at the
  <a href="https://www.w3.org/2012/09/19-svg-minutes.html#item08">Rigi
  Kaltbad group meeting</a>.
</p>

<p class="annotation">
  Adding 'miter-clip' line join was resolved at the
  <a href="https://www.w3.org/2015/02/12-svg-minutes.html#item03">Sydney
  (2015) group meeting</a>.
</p>

<div class="figure">
  <img class="bordered" src="images/linejoin-four.svg" alt="Image showing four paths, each with a different line join."/>
  <p class="caption">Four types of line joins.</p>
</div>

<table class="propdef">
  <tr>
    <th>Name:</th>
    <td><dfn id="StrokeMiterlimitProperty">stroke-miterlimit</dfn></td>
  </tr>
  <tr>
    <th>Value:</th>
    <td><a href="https://www.w3.org/TR/css3-values/#numbers">&lt;number></a></td>
  </tr>
  <tr>
    <th>Initial:</th>
    <td>4</td>
  </tr>
  <tr>
    <th>Applies to:</th>
    <td><a href="https://svgwg.org/svg2-draft/shapes.html#TermShapeElement">shapes</a> and <a href="https://svgwg.org/svg2-draft/text.html#TermTextContentElement">text content elements</a></td>
  </tr>
  <tr>
    <th>Inherited:</th>
    <td>yes</td>
  </tr>
  <tr>
    <th>Percentages:</th>
    <td>N/A</td>
  </tr>
  <tr>
    <th>Media:</th>
    <td>visual</td>
  </tr>
  <tr>
    <th>Computed value:</th>
    <td>as specified</td>
  </tr>
  <tr>
    <th><a href="https://svgwg.org/specs/animations/#Animatable">Animatable</a>:</th>
    <td>yes</td>
  </tr>
</table>

<p>
  When two line segments meet at a sharp angle and a value of
  <span class="prop-value">miter</span>,
  <span class="prop-value">miter-clip</span>, or
  <span class="prop-value">arcs</span> has been specified for
  <a class="property" href="#StrokeLinejoinProperty">stroke-linejoin</a>, it is possible for the join to extend
  far beyond the thickness of the line stroking the path. The
  <a class="property" href="#StrokeMiterlimitProperty">stroke-miterlimit</a> imposes a limit on the extent of the
  line join.
</p>

<dl>
  <dt><span class="prop-value">&lt;number></span></dt>
  <dd>
    The limit on the extent of a
    <span class="prop-value">miter</span>,
    <span class="prop-value">miter-clip</span>, or
    <span class="prop-value">arcs</span> line join as a multiple of
    the <a class="property" href="#StrokeWidthProperty">stroke-width</a> value. The value of
    <a class="property" href="#StrokeMiterlimitProperty">stroke-miterlimit</a> must be a <a href="https://www.w3.org/TR/css3-values/#numbers">&lt;number></a> greater
    than or equal to 1. Any other value is an error (see
    <a href="https://svgwg.org/svg2-draft/implnote.html#ErrorProcessing">Error processing</a>).
  </dd>
</dl>

<p>
  For the <span class="prop-value">miter</span> or the
  <span class="prop-value">miter-clip</span> values, given
  the angle <var>θ</var> between the segments in local coordinate system,
  the miter length is calculated by:
</p>

<div role="math" aria-describedby="math-miter-length">
  <math xmlns="http://www.w3.org/1998/Math/MathML" display="block">
    <mrow>
      <mi>miter length</mi>
      <mo>=</mo>
      <mfrac>
        <mi style="font-family: sans-serif">‘stroke-width’</mi>
        <mrow>
          <mi>sin</mi>
          <mo>⁡</mo>
          <mfrac>
            <mi>θ</mi>
            <mn>2</mn>
          </mfrac>
        </mrow>
      </mfrac>
    </mrow>
  </math>
  <pre id="math-miter-length">miter length = stroke-width / sin(theta / 2)</pre>
</div>

<p>
  If the miter length divided by the stroke width exceeds the
  <a class="property" href="#StrokeMiterlimitProperty">stroke-miterlimit</a> then for the value:
</p>
<dl>
  <dt><span class="prop-value">miter</span></dt>
  <dd>
    the join is converted to a bevel;
  </dd>
  <dt><span class="prop-value">miter-clip</span></dt>
  <dd>
    the miter is clipped by a line perpendicular to the line bisecting
    the angle between the two path segments at a distance of the value
    of miter length from the intersection of the two path segments.
  </dd>
</dl>

<div class="figure">
  <img class="bordered" src="images/miter-limit.svg" alt="Image showing resulting stroke when stroke miter limit is exceeded."/>
  <p class="caption">
    Effect on line join when <a class="property" href="#StrokeMiterlimitProperty">stroke-miterlimit</a> is
    exceeded. The olive-green dashed lines shows the position of the
    miter limit when the <a class="property" href="#StrokeMiterlimitProperty">stroke-miterlimit</a> value is 1.5. The
    gray regions shows what the joins would look like without a miter
    limit.
  </p>
</div>

<p>
  For the <span class="prop-value">arcs</span> value, the
  <em>miter length</em> is calculated along a circular arc that is
  tangent to the line bisecting the angle between the two segments at
  the point the two segments intersect and passes through the end
  point of the join. The line join is clipped, if necessary, by a line
  perpendicular to this arc at a <em>miter length</em> equal to the
  value of the <a class="property" href="#StrokeMiterlimitProperty">stroke-miterlimit</a> value multiplied by the
  stroke width.
</p>

<p class="annotation">
  The effect of 'stroke-miterlimit' on an 'arcs' line join was resolved
  at <a href="https://www.w3.org/2015/02/12-svg-minutes.html#item12">Sydney
  (2015) group meeting</a>.
</p>

<p>
  See the definition of the <a href="#TermLineJoinShape">line join shape</a> below for a more
  precise description of the shape a line join will have.
</p>

<h3 id="StrokeDashing" class="heading">2.7. Dashing strokes: the ‘<span class="property">stroke-dasharray</span>’,
‘<span class="property">stroke-dashoffset</span>’, ‘<span class="property">stroke-dashcorner</span>’
and ‘<span class="property">stroke-dashadjust</span>’ properties<a class="self-link" href="#StrokeDashing"></a></h3>

<table class="propdef">
  <tr>
    <th>Name:</th>
    <td><dfn id="StrokeDasharrayProperty">stroke-dasharray</dfn></td>
  </tr>
  <tr>
    <th>Value:</th>
    <td>none | <a href="#DataTypeDasharray">&lt;dasharray></a></td>
  </tr>
  <tr>
    <th>Initial:</th>
    <td>none</td>
  </tr>
  <tr>
    <th>Applies to:</th>
    <td><a href="https://svgwg.org/svg2-draft/shapes.html#TermShapeElement">shapes</a> and <a href="https://svgwg.org/svg2-draft/text.html#TermTextContentElement">text content elements</a></td>
  </tr>
  <tr>
    <th>Inherited:</th>
    <td>yes</td>
  </tr>
  <tr>
    <th>Percentages:</th>
    <td>refer to the size of the current viewport (see <a href="https://svgwg.org/svg2-draft/coords.html#Units">Units</a>)</td>
  </tr>
  <tr>
    <th>Media:</th>
    <td>visual</td>
  </tr>
  <tr>
    <th>Computed value:</th>
    <td>absolute lengths or percentages for &lt;dasharray>, or keyword specified</td>
  </tr>
  <tr>
    <th><a href="https://svgwg.org/specs/animations/#Animatable">Animatable</a>:</th>
    <td>yes (<a href="https://svgwg.org/specs/animations/#AdditionAttributes">non-additive</a>)</td>
  </tr>
</table>

<p>where:</p>

<p class="definition"><dfn id="DataTypeDasharray">&lt;dasharray></dfn> =
[ <a href="https://www.w3.org/TR/css3-values/#lengths">&lt;length></a> | <a href="https://www.w3.org/TR/css3-values/#percentages">&lt;percentage></a> | <a href="https://www.w3.org/TR/css3-values/#numbers">&lt;number></a> ]#*</p>

<p>The <a class="property" href="#StrokeDasharrayProperty">stroke-dasharray</a> property controls
the pattern of dashes and gaps used to form the shape of
a path's stroke.</p>

<dl>
  <dt><span class="prop-value">none</span></dt>
  <dd>Indicates that no dashing is used.</dd>

  <dt><span class="prop-value">&lt;dasharray></span></dt>
  <dd>
    <p>Specifies a dashing pattern to use.  A <a href="#DataTypeDasharray">&lt;dasharray></a> is
    a list of comma and/or white space separated lengths and percentages.
    Each value specifies a length along the path for which the stroke
    is to be painted (a <em>dash</em>) and not painted (a <em>gap</em>).
    Every second value in the list beginning with the first one specifies
    the length of a dash, and every other value specifies the length of a gap
    between the dashes.  If the list has an odd number of values, then it is
    repeated to yield an even number of values.  (Thus, the rendering behavior
    of <span class="prop-value">stroke-dasharray: 5,3,2</span>
    is equivalent to <span class="prop-value">stroke-dasharray: 5,3,2,5,3,2</span>.)</p>

    <p>The resulting even-length dashing pattern is repeated along each subpath.
    The dashing pattern is reset and begins again at the start of each subpath.</p>

    <p>If any value in the list is negative, the <a href="#DataTypeDasharray">&lt;dasharray></a> value is
    <a href="https://svgwg.org/svg2-draft/types.html#TermInvalidValue">invalid</a>.  If all of the values in the list are zero,
    then the stroke is rendered as if a value of <span class="prop-value">none</span>
    were specified.</p>
  </dd>
</dl>

<div class="figure">
  <img class="bordered" src="images/dashes.svg" alt="Image showing a thick, dashed stroke."/>
  <p class="caption">A dashed stroke.  The dashing pattern is <span class="prop-value">20,10</span>.
  The red line shows the actual path that is stroked.</p>
</div>

<table class="propdef">
  <tr>
    <th>Name:</th>
    <td><dfn id="StrokeDashoffsetProperty">stroke-dashoffset</dfn></td>
  </tr>
  <tr>
    <th>Value:</th>
    <td><a href="https://www.w3.org/TR/css3-values/#lengths">&lt;length></a> | <a href="https://www.w3.org/TR/css3-values/#percentages">&lt;percentage></a></td>
  </tr>
  <tr>
    <th>Initial:</th>
    <td>0</td>
  </tr>
  <tr>
    <th>Applies to:</th>
    <td><a href="https://svgwg.org/svg2-draft/shapes.html#TermShapeElement">shapes</a> and <a href="https://svgwg.org/svg2-draft/text.html#TermTextContentElement">text content elements</a></td>
  </tr>
  <tr>
    <th>Inherited:</th>
    <td>yes</td>
  </tr>
  <tr>
    <th>Percentages:</th>
    <td>refer to the size of the current viewport (see <a href="https://svgwg.org/svg2-draft/coords.html#Units">Units</a>)</td>
  </tr>
  <tr>
    <th>Media:</th>
    <td>visual</td>
  </tr>
  <tr>
    <th>Computed value:</th>
    <td>absolute length or percentage</td>
  </tr>
  <tr>
    <th><a href="https://svgwg.org/specs/animations/#Animatable">Animatable</a>:</th>
    <td>yes</td>
  </tr>
</table>

<p>The <a class="property" href="#StrokeDashoffsetProperty">stroke-dashoffset</a> property specifies the distance into the repeated
dash pattern to start the stroke dashing at the beginning of the path.  If the
value is negative, then the effect is the same as dash offset <var>d</var>:</p>

<div role="math" aria-describedby="math-dashoffset">
  <math xmlns="http://www.w3.org/1998/Math/MathML" display="block">
    <mrow>
      <mi>d</mi>
      <mo>=</mo>
      <mi>s</mi>
      <mo>-</mo>
      <mfenced open="|" close="|">
        <mi style="font-family: sans-serif">‘stroke-dashoffset’</mi>
      </mfenced>
      <mo>mod</mo>
      <mi>s</mi>
    </mrow>
  </math>
  <pre id="math-dashoffset">d = s - (abs(stroke-dashoffset) mod s)</pre>
</div>

<p>where <var>s</var> is the sum of the dash array values.</p>

<div class="figure">
  <img class="bordered" src="images/dashoffset.svg" alt="Image showing a thick, dashed stroke with a non-zero dash offset."/>
  <p class="caption">A dashed stroke with a non-zero dash offset.  The dashing
  pattern is <span class="prop-value">20,10</span> and the dash offset is
  <span class="prop-value">15</span>.  The red line shows the actual path that
  is stroked.</p>
</div>

<p>See the definition of <a href="#TermDashPositions">dash positions</a> below for a more precise
description of positions along a path that dashes will be placed.</p>

<table class="propdef">
  <tr>
    <th>Name:</th>
    <td><dfn id="StrokeDashcornerProperty">stroke-dashcorner</dfn></td>
  </tr>
  <tr>
    <th>Value:</th>
    <td>none | <a href="https://www.w3.org/TR/css3-values/#lengths">&lt;length></a></td>
  </tr>
  <tr>
    <th>Initial:</th>
    <td>none</td>
  </tr>
  <tr>
    <th>Applies to:</th>
    <td><a href="https://svgwg.org/svg2-draft/shapes.html#TermShapeElement">shapes</a> and <a href="https://svgwg.org/svg2-draft/text.html#TermTextContentElement">text content elements</a></td>
  </tr>
  <tr>
    <th>Inherited:</th>
    <td>yes</td>
  </tr>
  <tr>
    <th>Percentages:</th>
    <td>refer to the size of the current viewport (see <a href="https://svgwg.org/svg2-draft/coords.html#Units">Units</a>)</td>
  </tr>
  <tr>
    <th>Media:</th>
    <td>visual</td>
  </tr>
  <tr>
    <th>Computed value:</th>
    <td>absolute length or keyword specified</td>
  </tr>
  <tr>
    <th><a href="https://svgwg.org/specs/animations/#Animatable">Animatable</a>:</th>
    <td>yes</td>
  </tr>
</table>

<p class="note">This is a new feature, added to allow better control of dashing
at the vertices of a shape, such as at the four corners of a rectangle.</p>

<p>The <a class="property" href="#StrokeDashcornerProperty">stroke-dashcorner</a> property controls whether a dash
is always painted at the vertices of a stroked shape.  The points at which
a dash corner is painted include the start and end points of every
segment within the shape's <a href="https://svgwg.org/svg2-draft/paths.html#TermEquivalentPath">equivalent path</a>.</p>

<p class="issue" data-issue="8" id="issue8"><a class="self-link" href="#issue8"></a>This will not help with placing a corner dash on a
<span class="element-name">‘<a href="https://svgwg.org/svg2-draft/shapes.html#RectElement"><span>rect</span></a>’</span> with rounded corners, as they will also be placed at
the points between the arcs forming the rounded corners and the
straight line segments.</p>

<dl>
  <dt><span class="prop-value">none</span></dt>
  <dd>Indicates that no dashes are required to be painted at the
  vertices of the shape.</dd>

  <dt><span class="prop-value">&lt;length></span></dt>
  <dd>Specifies that a dash of the given length is to be painted
  at each vertex of the shape.  For an open shape, the first
  corner dash is positioned so that it begins at the start of
  the path, and the last corner dash so that it ends at the
  end of the path.  The other corner dashes of an open shape,
  and all corner dashes of a closed shape, are positioned so that
  they are centered on their vertex.</dd>
</dl>

<p class="issue" data-issue="9" id="issue9"><a class="self-link" href="#issue9"></a>Should the corner dash at the first and last vertex
of an open shape be half the length of the others?  Should this be
author controllable?</p>

<p class="issue" data-issue="10" id="issue10"><a class="self-link" href="#issue10"></a>Should there be a way to specify a padding, so that
any dash pattern between the corner dashes does not not run up against them?</p>

<p>The <a class="property" href="#StrokeDashcornerProperty">stroke-dashcorner</a> property also controls how
the dash pattern given by <a class="property" href="#StrokeDasharrayProperty">stroke-dasharray</a> is repeated.
When <span class="prop-value">none</span> is used, the dash pattern
is repeated over the entire length of the subpath.  When any
other value is used, the dash pattern is repeated separately
on each path segment in the space between the segment's
two adjacent corner dashes.</p>

<p class="issue" data-issue="11" id="issue11"><a class="self-link" href="#issue11"></a>Need to define what happens when corner dashes would overlap.</p>

<div class="figure">
  <img class="bordered" src="images/dashcorner.svg" alt="Image showing a rectangle at each corner and short dashes in between."/>
  <p class="caption">A rectangle painted with a dashed stroke and with
  corner dashes.  The dashing pattern is <span class="prop-value">0,8</span>
  and the corner dash length is <span class="prop-value">32</span>.</p>
</div>

<table class="propdef">
  <tr>
    <th>Name:</th>
    <td><dfn id="StrokeDashadjustProperty">stroke-dashadjust</dfn></td>
  </tr>
  <tr>
    <th>Value:</th>
    <td>none | [stretch | compress] [dashes | gaps]?</td>
  </tr>
  <tr>
    <th>Initial:</th>
    <td>none</td>
  </tr>
  <tr>
    <th>Applies to:</th>
    <td><a href="https://svgwg.org/svg2-draft/shapes.html#TermShapeElement">shapes</a> and <a href="https://svgwg.org/svg2-draft/text.html#TermTextContentElement">text content elements</a></td>
  </tr>
  <tr>
    <th>Inherited:</th>
    <td>yes</td>
  </tr>
  <tr>
    <th>Percentages:</th>
    <td>N/A</td>
  </tr>
  <tr>
    <th>Media:</th>
    <td>visual</td>
  </tr>
  <tr>
    <th>Computed value:</th>
    <td>as specified</td>
  </tr>
  <tr>
    <th><a href="https://svgwg.org/specs/animations/#Animatable">Animatable</a>:</th>
    <td>yes</td>
  </tr>
</table>

<p class="note">This is a new feature, added to allow for more visually
pleasing stroke dash patterns.</p>

<p>The <a class="property" href="#StrokeDashadjustProperty">stroke-dashadjust</a> property specifies whether and
how a stroke's dash pattern will be adjusted so that it is repeated
a whole number of times along an element's subpaths.</p>

<dl>
  <dt><span class="prop-value">none</span></dt>
  <dd>Indicates that no adjustment of the dash pattern takes place.</dd>

  <dt><span class="prop-value">stretch</span></dt>
  <dd>Indicates that when the dash pattern does not fit into a subpath
  a whole number times, the dashes or gaps (or both) will be lengthened
  so that it does.</dd>

  <dt><span class="prop-value">compress</span></dt>
  <dd>Indicates that when the dash pattern does not fit into a subpath
  a whole number times, the dashes or gaps (or both) will be shortened
  so that it does.</dd>

  <dt><span class="prop-value">dashes</span></dt>
  <dd>Indicates that when a dash pattern is to be stretched or compressed,
  only the length of the dashes will be adjusted; the gaps will remain
  as specified.</dd>

  <dt><span class="prop-value">gaps</span></dt>
  <dd>Indicates that when a dash pattern is to be stretched or compressed,
  only the length of the gaps will be adjusted; the dashes will remain
  as specified.</dd>
</dl>

<p class="issue" data-issue="12" id="issue12"><a class="self-link" href="#issue12"></a>Do we need to be able to choose to stretch or compress?</p>

<p>If neither the <span class="prop-value">dashes</span> or
<span class="prop-value">gaps</span> keyword is given, both the
dashes and the gaps will be adjusted.</p>

<p>The target length that a dash pattern will be adjusted to depends
on the value of the <a class="property" href="#StrokeDashcornerProperty">stroke-dashcorner</a> property:</p>

<ol>
  <li>If <a class="property" href="#StrokeDashcornerProperty">stroke-dashcorner</a> is <span class="prop-value">none</span>,
  then the dash pattern will be adjusted to fit within the length of
  the subpath a whole number of times.</li>

  <li>If <a class="property" href="#StrokeDashcornerProperty">stroke-dashcorner</a> has any other value, including a zero
  length, then the dash pattern will be adjusted differently for each
  segment of the subpath such that it fits between the two corner
  dashes at the ends of the segment a whole number of times.</li>
</ol>

<p>The adjustment of dash and gap length in a dash pattern is done by
scaling the lengths by a factor, which is the number closest to 1 that
will result in the dash pattern fitting in the target length a whole
number of times.  If <span class="prop-value">stretch</span> is used,
the factor is a number between 1 and 2, while if <span class="prop-value">compress</span>
is used, the factor is a number between 0 and 1.  If there
is no appropriate factor that can be chosen – for example if
<span class="prop-value">stretch</span> is used but the
dash pattern is longer than the target length, or if <span class="prop-value">gaps</span>
was specified but all of the gaps in the dash pattern are zero – then
no adjustment is performed.</p>

<p class="issue" data-issue="13" id="issue13"><a class="self-link" href="#issue13"></a>Should there be an <span class="prop-value">auto</span>
value which means round to the closest number of whole repetitions?</p>

<p class="issue" data-issue="14" id="issue14"><a class="self-link" href="#issue14"></a>Does the compression or expansion of the dashes and gaps
happen after an odd-lengthed dash array is doubled so that it has an even
number of entries or before? Probably after.</p>

<p class="issue" data-issue="15" id="issue15"><a class="self-link" href="#issue15"></a>Do we want to allow control of whether the stroke ends with a
dash or with a gap? For a closed path, you probably want a gap at the end,
while for a non-closed path, a dash at the end is probably better. Omit control
for this, but just do it automatically based on whether the path is closed?</p>

<div class="figure">
  <img class="bordered" src="images/dashadjust.svg" alt="Image showing three shapes stroked with the same dash pattern, all adjusted to their individual path lengths."/>
  <p class="caption">The same dash stroke used on three
  different paths, adjusted to fit a whole number of
  times on each.</p>
</div>

<h2 id="StrokeShape" class="heading">3. Computing the shape of the stroke<a class="self-link" href="#StrokeShape"></a></h2>

<div class="annotation svg2-requirement">
  <table>
    <tr>
      <th>SVG 2 Requirement:</th>
      <td>Specify stroke dashing more precisely.</td>
    </tr>
    <tr>
      <th>Resolution:</th>
      <td><a href="https://www.w3.org/2011/10/28-svg-irc#T18-14-14">SVG 2 shall specify stroke dashing more precisely.</a></td>
    </tr>
    <tr>
      <th>Purpose:</th>
      <td>To define dash starting point on basic shapes and path segments.</td>
    </tr>
    <tr>
      <th>Owner:</th>
      <td>Cameron (no action)</td>
    </tr>
  </table>
</div>

<p class="issue" data-issue="16" id="issue16"><a class="self-link" href="#issue16"></a>Something in this section needs to reference
<span class="attr-name">‘<a href="https://svgwg.org/svg2-draft/paths.html#PathLengthAttribute"><span>pathLength</span></a>’</span> so that dash lengths are in the author's
path length space.</p>

<p class="issue" data-issue="17" id="issue17"><a class="self-link" href="#issue17"></a>This section doesn't handle <a class="property" href="#StrokeDashcornerProperty">stroke-dashcorner</a>
and <a class="property" href="#StrokeDashadjustProperty">stroke-dashadjust</a> yet.</p>

<p>The <dfn id="TermStrokeShape">stroke shape</dfn> of an element is the
shape that is filled by the <a class="property" href="#StrokeProperty">stroke</a> property.  The following algorithm
describes what the stroke shape of a <span class="element-name">‘<a href="https://svgwg.org/svg2-draft/paths.html#PathElement"><span>path</span></a>’</span> or <a href="https://svgwg.org/svg2-draft/shapes.html#TermBasicShapeElement">basic shape</a> is,
taking into account the stroking properties above:</p>

<p class="issue" data-issue="18" id="issue18"><a class="self-link" href="#issue18"></a>This should include text elements too, but should we
keep stroke dashing on text?</p>

<ol class="algorithm">
  <li>Let <var>shape</var> be an empty shape.</li>
  <li>Let <var>path</var> be the <a href="https://svgwg.org/svg2-draft/paths.html#TermEquivalentPath">equivalent path</a> of the element.</li>
  <li>For each subpath of <var>path</var>:
    <ol>
      <li>Let <var>positions</var> be the <a href="#TermDashPositions">dash positions</a> for the subpath.</li>
      <li>For each pair &lt;<var>start</var>, <var>end</var>> in <var>positions</var>:
        <ol>
          <li>Let <var>dash</var> be the shape that includes, for all distances
          between <var>start</var> and <var>end</var> along the subpath, all
          points that lie on the line perpendicular to the subpath at that
          distance and which are within distance <a class="property" href="#StrokeWidthProperty">stroke-width</a> of
          the point on the subpath at that position.</li>

          <li>Set <var>dash</var> to be the union of <var>dash</var> and the
          starting <a href="#TermCapShape">cap shape</a> for the subpath at position <var>start</var>.</li>

          <li>Set <var>dash</var> to be the union of <var>dash</var> and the
          ending <a href="#TermCapShape">cap shape</a> for the subpath at position <var>end</var>.</li>

          <li>
            Let <var>index</var> and <var>last</var> be the indexes of the
            path segments in the subpath at distance <var>start</var> and
            <var>end</var> along the subpath.

            <p class="note">It does not matter whether any zero length segments are
            included when choosing <var>index</var> and <var>last</var>.</p>
          </li>

          <li>While <var>index</var> &lt; <var>last</var>:
            <ol>
              <li>Set <var>dash</var> to be the union of <var>dash</var> and the
              <a href="#TermLineJoinShape">line join shape</a> for the subpath at segment index <var>index</var>.</li>

              <li>Set <var>index</var> to <var>index</var> + 1.</li>
            </ol>
          </li>

          <li>Set <var>shape</var> to be the union of <var>shape</var> and
          <var>stroke</var>.</li>
        </ol>
      </li>
    </ol>
  </li>
  <li>Return <var>shape</var>.</li>
</ol>

<p>The <dfn id="TermDashPositions">dash positions</dfn> for a given subpath of
the <a href="https://svgwg.org/svg2-draft/paths.html#TermEquivalentPath">equivalent path</a> of a <span class="element-name">‘<a href="https://svgwg.org/svg2-draft/paths.html#PathElement"><span>path</span></a>’</span> or <a href="https://svgwg.org/svg2-draft/shapes.html#TermBasicShapeElement">basic shape</a> is a
sequence of pairs of values, which represent the starting and ending distance
along the subpath for each of the dashes that form the subpath's stroke.  It is
determined as follows:</p>

<ol class="algorithm">
  <li>Let <var>pathlength</var> be the length of the subpath.</li>

  <li>Let <var>dashes</var> be the list of values of <a class="property" href="#StrokeDasharrayProperty">stroke-dasharray</a>
  on the element, converted to user units, repeated if necessary so that it has
  an even number of elements; if the property has the value
  <span class="prop-value">none</span>, then the list has a single value 0.</li>

  <li>Let <var>count</var> be the number of values in <var>dashes</var>.</li>
  <li>Let <var>sum</var> be the sum of the values in <var>dashes</var>.</li>

  <li>If <var>sum</var> = 0, then return a sequence with the single pair
  &lt;0, <var>pathlength</var>>.</li>

  <li>Let <var>positions</var> be an empty sequence.</li>

  <li>Let <var>offset</var> be the value of the <a class="property" href="#StrokeDashoffsetProperty">stroke-dashoffset</a>
  property on the element.</li>

  <li>If <var>offset</var> is negative, then set <var>offset</var> to
  <var>sum</var> − abs(<var>offset</var>).</li>

  <li>Set <var>offset</var> to <var>offset</var> mod <var>sum</var>.</li>

  <li>Let <var>index</var> be the smallest integer such that
  sum(<var>dashes<sub>i</sub></var>, 0 ≤ <var>i</var> ≤ <var>index</var>) ≥ <var>offset</var>.</li>

  <li>Let <var>dashlength</var> be
  min(sum(<var>dashes<sub>i</sub></var>, 0 ≤ <var>i</var> ≤ <var>index</var>) − <var>offset</var>, <var>pathlength</var>).</li>

  <li>If <var>index</var> mod 2 = 0, then append to <var>positions</var> the
  pair &lt;0, <var>dashlength</var>>.</li>

  <li>Let <var>position</var> be <var>dashlength</var>.</li>

  <li>While <var>position</var> &lt; <var>pathlength</var>:
    <ol>
      <li>Set <var>index</var> to (<var>index</var> + 1) mod <var>count</var>.</li>

      <li>Let <var>dashlength</var> be
      min(<var>dashes</var><sub><var>index</var></sub>, <var>pathlength</var> − <var>position</var>).</li>

      <li>If <var>index</var> mod 2 = 0, then append to <var>positions</var> the
      pair &lt;<var>position</var>, <var>position</var> + <var>dashlength</var>>.</li>

      <li>Set <var>position</var> to <var>position</var> + <var>dashlength</var>.</li>
    </ol>
  </li>

  <li>Return <var>positions</var>.</li>
</ol>

<p>The starting and ending <dfn id="TermCapShape">cap shapes</dfn> at a given
<var>position</var> along a subpath are determined as follows:</p>

<ol class="algorithm">
  <li>If <a class="property" href="#StrokeLinecapProperty">stroke-linecap</a> is <span class="prop-value">butt</span>, then return an empty shape.</li>

  <li>Otherwise, if <a class="property" href="#StrokeLinecapProperty">stroke-linecap</a> is <span class="prop-value">round</span>, then:
    <ol>
      <li>If this is a starting cap, then return a semicircle of radius <a class="property" href="#StrokeWidthProperty">stroke-width</a> positioned such that:
        <ul>
          <li>Its straight edge is parallel to the line perpendicular to the subpath at distance <var>position</var> along it.</li>
          <li>The midpoint of its straight edge is at the point that is along the subpath at distance <var>position</var>.</li>
          <li>The direction from the midpoint of its arc to the midpoint of its straight edge is the same as the direction of the subpath at distance <var>position</var> along it.</li>
        </ul>
      </li>
      <li>Otherwise, this is an ending cap.  Return a semicircle of radius <a class="property" href="#StrokeWidthProperty">stroke-width</a> positioned such that:
        <ul>
          <li>Its straight edge is parallel to the line perpendicular to the subpath at distance <var>position</var> along it.</li>
          <li>The midpoint of its straight edge is at the point that is along the subpath at distance <var>position</var>.</li>
          <li>The direction from the midpoint of its straight edge to the midpoint of its arc is the same as the direction of the subpath at distance <var>position</var> along it.</li>
        </ul>
      </li>
    </ol>
  </li>

  <li>Otherwise, <a class="property" href="#StrokeLinecapProperty">stroke-linecap</a> is <span class="prop-value">square</span>:
    <ol>
      <li>If this is a starting cap, then return a rectangle with side lengths <a class="property" href="#StrokeWidthProperty">stroke-width</a> and <a class="property" href="#StrokeWidthProperty">stroke-width</a> / 2 positioned such that:
        <ul>
          <li>Its longer edges, <var>A</var> and <var>B</var>, are parallel to the line perpendicular to the subpath at distance <var>position</var> along it.</li>
          <li>The midpoint of <var>A</var> is at <var>start</var>.</li>
          <li>The direction from the midpoint of <var>B</var> to the midpoint of <var>A</var> is the same as the direction of the subpath at distance <var>position</var> along it.</li>
        </ul>
      </li>
      <li>Otherwise, this is an ending cap.  Return a rectangle with side lengths <a class="property" href="#StrokeWidthProperty">stroke-width</a> and <a class="property" href="#StrokeWidthProperty">stroke-width</a> / 2 positioned such that:
        <ul>
          <li>Its longer edges, <var>A</var> and <var>B</var>, are parallel to the line perpendicular to the subpath at distance <var>position</var> along it.</li>
          <li>The midpoint of <var>A</var> is at <var>end</var>.</li>
          <li>The direction from the midpoint of <var>A</var> to the midpoint of <var>B</var> is the same as the direction of the subpath at distance <var>position</var> along it.</li>
        </ul>
      </li>
    </ol>
  </li>
</ol>

<div class="figure">
  <img class="bordered" src="images/linecap-construction.svg" alt="Image showing how to construct the three types of line caps"/>
  <p class="caption">The three different <a class="property" href="#StrokeLinecapProperty">stroke-linecap</a> values used on
  paths with a single, non-zero length subpath.  The white line is the path
  itself and the thick gray area is the stroke.  On the top row, the green lines
  indicate the perpendicular to the tangent at the path endpoints and the pink
  areas are the caps.  The bottom row shows the stroke without the perpendicular
  and cap highlighting.</p>
</div>

<p>The <dfn id="TermLineJoinShape">line join shape</dfn> for a given segment of
a subpath is determined as follows:</p>

<ol class="algorithm">
  <li>Let <var>P</var> be the point at the end of the segment.</li>
  <li>Let <var>A</var> be the line parallel to the tangent at the end of the segment.</li>
  <li>Let <var>B</var> be the line parallel to the tangent at the start of the following segment.</li>

  <li>If <var>A</var> and <var>B</var> are the same line, then return an empty shape.</li>

  <li>Let <var>A<sub>left</sub></var> and <var>A<sub>right</sub></var> be lines
  parallel to <var>A</var> at a distance of <a class="property" href="#StrokeWidthProperty">stroke-width</a> / 2 to the
  left and to the right of <var>A</var> relative to the subpath direction, respectively.</li>

  <li>Let <var>B<sub>left</sub></var> and <var>B<sub>right</sub></var> be lines
  parallel to <var>B</var> at a distance of <a class="property" href="#StrokeWidthProperty">stroke-width</a> / 2 to the
  left and to the right of <var>B</var>, relative to the subpath direction, respectively.</li>

  <li>
    Let <var>P</var><sub>1</sub>, <var>P</var><sub>2</sub> and
    <var>P</var><sub>3</sub> be points determined as follows:

    <ol>
      <li>If the smaller angle between <var>A</var> and <var>B</var> is on the
      right of these lines, considering the direction of the subpath, then
      <var>P</var><sub>1</sub> and <var>P</var><sub>2</sub> are the points on
      <var>A<sub>left</sub></var> and <var>B<sub>left</sub></var> closest to
      <var>P</var>, and <var>P</var><sub>3</sub> is the intersection of
      <var>A<sub>left</sub></var> and <var>B<sub>left</sub></var>.</li>

      <li>Otherwise, <var>P</var><sub>1</sub> and <var>P</var><sub>2</sub> are
      the points on <var>A<sub>right</sub></var> and <var>B<sub>right</sub></var>
      closest to <var>P</var>, and <var>P</var><sub>3</sub> is the intersection
      of <var>A<sub>right</sub></var> and <var>B<sub>right</sub></var>.</li>
    </ol>
  </li>

  <li>Let <var>bevel</var> be the triangle formed from the three points
  <var>P</var>, <var>P</var><sub>1</sub> and <var>P</var><sub>2</sub>.</li>

  <li>If <a class="property" href="#StrokeLinejoinProperty">stroke-linejoin</a> is <span class="prop-value">round</span>, then
  return the union of <var>bevel</var> and a circular sector of radius
  <a class="property" href="#StrokeWidthProperty">stroke-width</a>, centered on <var>P</var>, and which has
  <var>P</var><sub>1</sub> and <var>P</var><sub>2</sub> as the two endpoints of
  the arc.</li>

  <li>If <a class="property" href="#StrokeLinejoinProperty">stroke-linejoin</a> is <span class="prop-value">arcs</span>,
    then find the circles that are tangent to the stroke edges at
    <var>P</var><sub>1</sub> and <var>P</var><sub>2</sub> with the
    same curvature as the edges at those points (see below). If both
    curvatures are zero fall through to <span class="prop-value">miter-clip</span>.
    Extend the stroke edges using these circles (or a line, in the case
    of zero curvature). If the two circles (or circle and line) do not
    intersect, fall through to <span class="prop-value">miter-clip</span>.

    If the two circles (or circle and line) intersect, the line join
    region is defined by the lines that connect <var>P</var>
    with <var>P</var><sub>1</sub> and <var>P</var><sub>2</sub> and the
    arcs defined by the circles (or arc and line) between the closest
    intersection point to <var>P</var>, and <var>P</var><sub>1</sub>
    and <var>P</var><sub>2</sub>.

    Next calculate the <em>miter limit</em> as defined in
    the <a class="property" href="#StrokeMiterlimitProperty">stroke-miterlimit</a> section. Clip any part of the line
    join region that extends past the miter limit. Return the
    resulting region.

    Note that the curvatures are calculated in user-space before any
    transforms are applied.</li>

  <li>
    If <a class="property" href="#StrokeLinejoinProperty">stroke-linejoin</a> is <span class="prop-value">miter</span> or
    <span class="prop-value">miter-clip</span> then the line join
    region is the union of <var>bevel</var> and the triangle formed
    from the three points <var>P</var><sub>1</sub>,
    <var>P</var><sub>2</sub> and <var>P</var><sub>3</sub>.
  </li>

  <li>
    Let <var>θ</var> be the angle between <var>A</var> and <var>B</var>.
    If 1 / sin(<var>θ</var> / 2) ≤ <a class="property" href="#StrokeMiterlimitProperty">stroke-miterlimit</a>, then return
    the line join region.
  </li>

  <li>
    If <a class="property" href="#StrokeLinejoinProperty">stroke-linejoin</a> is <span class="prop-value">miter-clip</span>,
    then clip any part of the line join region that extends past the
    miter limit and return this region.
  </li>

  <li>Return <var>bevel</var>.</li>
</ol>

<div class="figure">
  <img class="bordered" src="images/linejoin-construction.svg" alt="Image showing the lines and points computed to construct a round line join."/>
  <p class="caption">Construction of a round line join shape, shown in pink.
  The white line is the original path, which has two segments that come to a
  point, and the gray region is the stroke.</p>
</div>

<div class="figure">
  <img class="bordered" src="images/linejoin-construction-arcs.svg" alt="Image showing the lines and points computed to construct an arcs line join."/>
  <p class="caption">Construction of an arcs line join shape, shown in
    pink. The white line is the original path, which has two segments
    that come to a point, and the gray region is the stroke. The
    dashed lines show circles that are tangent to and have the
    curvature of the segments at the join.  The olive-green circles
    (concentric with the dashed circles) define the join shape.</p>
</div>

<h3 id="CurvatureCalculation" class="heading">3.1. Computing the circles for the <span class="prop-value">arcs</span>
'stroke-linejoin'<a class="self-link" href="#CurvatureCalculation"></a></h3>

<p>The <span class="prop-value">arcs</span> <a class="property" href="#StrokeLinejoinProperty">stroke-linejoin</a>
  requires finding circles that are both tangent to and have the same
  curvatures as the outer stroke edges at the ends of path
  segments. To find one of these circles, first calculate the
  curvature <var>κ</var> of the path segment at its end (see
  below). Next, find the radius of a circle corresponding to this
  curvature: <var>r</var> = 1/<var>κ</var>. Increase or
  decrease the radius by one half of the stroke width to account for
  the stroke: <var>r<sub>c</sub></var> = <var>r</var> ± ½
  stroke-width. The center of the circle will be on a line normal to
  the path end a distance of <var>r<sub>c</sub></var> away from the
  outer stroke edge at the end.</p>

<p>For a line: the curvature is infinite. Extend the outer stroke edge by a line.</p>

<p>For an elliptical arc:</p>

  <div role="math" aria-describedby="math-curvature-of-ellipse">
    <math xmlns="http://www.w3.org/1998/Math/MathML" display="block">
      <mi>κ<!-- κ --></mi>
      <mo stretchy="false">(</mo>
      <mi>t</mi>
      <mo stretchy="false">)</mo>
      <mo>=</mo>
      <mrow class="MJX-TeXAtom-ORD">
	<mfrac>
	  <mrow class="MJX-TeXAtom-ORD">
            <msub>
              <mi>r</mi>
              <mi>x</mi>
            </msub>
            <msub>
              <mi>r</mi>
              <mi>y</mi>
            </msub>
	  </mrow>
	  <mrow class="MJX-TeXAtom-ORD">
            <mo stretchy="false">(</mo>
            <msubsup>
              <mi>r</mi>
              <mi>x</mi>
              <mn>2</mn>
            </msubsup>
            <msup>
              <mi>sin</mi>
              <mn>2</mn>
            </msup>
            <mo>⁡<!-- ⁡ --></mo>
            <mi>t</mi>
            <mo>+</mo>
            <msubsup>
              <mi>r</mi>
              <mi>y</mi>
              <mn>2</mn>
            </msubsup>
            <msup>
              <mi>cos</mi>
              <mn>2</mn>
            </msup>
            <mo>⁡<!-- ⁡ --></mo>
            <mi>t</mi>
            <msup>
              <mo stretchy="false">)</mo>
              <mrow class="MJX-TeXAtom-ORD">
		<mn>3</mn>
		<mrow class="MJX-TeXAtom-ORD">
		  <mo>/</mo>
		</mrow>
		<mn>2</mn>
              </mrow>
            </msup>
	  </mrow>
	</mfrac>
      </mrow>
    </math>
    <pre id="math-curvature-of-ellipse">$$\kappa(t) = {{r_x r_y}\over{(r_x^2 \sin^2 t + r_y^2 \cos^2 t)^{3/2}}}$$</pre>
  </div>

  <p>where:</p>

  <div role="math" aria-describedby="math-curvature-t">
    <math xmlns="http://www.w3.org/1998/Math/MathML" display="block">
      <mi>t</mi>
      <mo>=</mo>
      <mi>arctan</mi>
      <mo>⁡<!-- ⁡ --></mo>
      <mrow>
        <mo>(</mo>
        <mrow>
          <mrow class="MJX-TeXAtom-ORD">
	    <mfrac>
	      <msub>
                <mi>r</mi>
                <mi>y</mi>
	      </msub>
	      <msub>
                <mi>r</mi>
                <mi>x</mi>
	      </msub>
	    </mfrac>
          </mrow>
          <mi>tan</mi>
          <mo>⁡<!-- ⁡ --></mo>
          <mi>θ<!-- θ --></mi>
        </mrow>
        <mo>)</mo>
      </mrow>
    </math>
    <pre id="math-curvature-t">$$t = \arctan \left( {r_y \over r_x} \tan \theta \right)$$</pre>
  </div>

  <p>The parameter <var>θ</var> at the beginning or end of an
    arc segment can be found by using the formulas in
    the <a href="https://svgwg.org/svg2-draft/implnote.html#ArcImplementationNotes">Elliptical arc
    implementation notes</a>. (Note, some renderers convert elliptical
    arcs to cubic Béziers prior to rendering so the equations here may
    not be needed.)</p>

<p>For a quadratic Bézier:</p>

  <div role="math" aria-describedby="math-quadratic-start">
    <math xmlns="http://www.w3.org/1998/Math/MathML" display="block">
      <mi>κ<!-- κ --></mi>
      <mo stretchy="false">(</mo>
      <mn>0</mn>
      <mo stretchy="false">)</mo>
      <mo>=</mo>
      <mrow class="MJX-TeXAtom-ORD">
	<mfrac>
	  <mn>1</mn>
	  <mn>2</mn>
	</mfrac>
      </mrow>
      <mrow class="MJX-TeXAtom-ORD">
	<mfrac>
	  <mrow>
            <mo stretchy="false">(</mo>
            <msub>
              <mi>P</mi>
              <mn>1</mn>
            </msub>
            <mo>−<!-- − --></mo>
            <msub>
              <mi>P</mi>
              <mn>0</mn>
            </msub>
            <mo stretchy="false">)</mo>
            <mo>×<!-- × --></mo>
            <mo stretchy="false">(</mo>
            <msub>
              <mi>P</mi>
              <mn>2</mn>
            </msub>
            <mo>−<!-- − --></mo>
            <msub>
              <mi>P</mi>
              <mn>1</mn>
            </msub>
            <mo stretchy="false">)</mo>
	  </mrow>
	  <mrow>
            <mrow class="MJX-TeXAtom-ORD">
              <mo stretchy="false">|</mo>
            </mrow>
            <msub>
              <mi>P</mi>
              <mn>1</mn>
            </msub>
            <mo>−<!-- − --></mo>
            <msub>
              <mi>P</mi>
              <mn>0</mn>
            </msub>
            <msup>
              <mrow class="MJX-TeXAtom-ORD">
		<mo stretchy="false">|</mo>
              </mrow>
              <mn>3</mn>
            </msup>
	  </mrow>
	</mfrac>
      </mrow>
    </math>
    <pre id="math-quadratic-start">$$\kappa(0) = {2\over3}{(P_1-P_0)\times((P_0-P_1)+(P_2-P_1))\over|P_1-P_0|^3}$$</pre>
  </div>

  <div role="math" aria-describedby="math-quadratic-end">
    <math xmlns="http://www.w3.org/1998/Math/MathML" display="block">
      <mi>κ<!-- κ --></mi>
      <mo stretchy="false">(</mo>
      <mn>1</mn>
      <mo stretchy="false">)</mo>
      <mo>=</mo>
      <mrow class="MJX-TeXAtom-ORD">
	<mfrac>
	  <mn>1</mn>
	  <mn>2</mn>
	</mfrac>
      </mrow>
      <mrow class="MJX-TeXAtom-ORD">
	<mfrac>
	  <mrow>
            <mo stretchy="false">(</mo>
            <msub>
              <mi>P</mi>
              <mn>2</mn>
            </msub>
            <mo>−<!-- − --></mo>
            <msub>
              <mi>P</mi>
              <mn>1</mn>
            </msub>
            <mo stretchy="false">)</mo>
            <mo>×<!-- × --></mo>
            <mo stretchy="false">(</mo>
            <msub>
              <mi>P</mi>
              <mn>0</mn>
            </msub>
            <mo>−<!-- − --></mo>
            <msub>
              <mi>P</mi>
              <mn>1</mn>
            </msub>
            <mo stretchy="false">)</mo>
	  </mrow>
	  <mrow>
            <mrow class="MJX-TeXAtom-ORD">
              <mo stretchy="false">|</mo>
            </mrow>
            <msub>
              <mi>P</mi>
              <mn>2</mn>
            </msub>
            <mo>−<!-- − --></mo>
            <msub>
              <mi>P</mi>
              <mn>1</mn>
            </msub>
            <msup>
              <mrow class="MJX-TeXAtom-ORD">
		<mo stretchy="false">|</mo>
              </mrow>
              <mn>3</mn>
            </msup>
	  </mrow>
	</mfrac>
      </mrow>
    </math>
    <pre id="math-quadratic-end">$$\kappa(0) = {2\over3}{(P_1-P_0)\times((P_0-P_1)+(P_2-P_1))\over|P_1-P_0|^3}$$</pre>
  </div>

  <p>Where <var>κ(0)</var> and <var>κ(1)</var> are the
  signed curvatures at the start and end of the path segment
  respectively, and the <var>P</var>'s are the three points that
  define the quadratic Bézier.</p>

<p>For a cubic Bézier:</p>

  <div role="math" aria-describedby="math-cubic-start">
    <math xmlns="http://www.w3.org/1998/Math/MathML" display="block">
      <mi>κ<!-- κ --></mi>
      <mo stretchy="false">(</mo>
      <mn>0</mn>
      <mo stretchy="false">)</mo>
      <mo>=</mo>
      <mrow class="MJX-TeXAtom-ORD">
	<mfrac>
	  <mn>2</mn>
	  <mn>3</mn>
	</mfrac>
      </mrow>
      <mrow class="MJX-TeXAtom-ORD">
	<mfrac>
	  <mrow>
            <mo stretchy="false">(</mo>
            <msub>
              <mi>P</mi>
              <mn>1</mn>
            </msub>
            <mo>−<!-- − --></mo>
            <msub>
              <mi>P</mi>
              <mn>0</mn>
            </msub>
            <mo stretchy="false">)</mo>
            <mo>×<!-- × --></mo>
            <mo stretchy="false">(</mo>
            <msub>
              <mi>P</mi>
              <mn>2</mn>
            </msub>
            <mo>−<!-- − --></mo>
            <msub>
              <mi>P</mi>
              <mn>1</mn>
            </msub>
            <mo stretchy="false">)</mo>
	  </mrow>
	  <mrow>
            <mrow class="MJX-TeXAtom-ORD">
              <mo stretchy="false">|</mo>
            </mrow>
            <msub>
              <mi>P</mi>
              <mn>1</mn>
            </msub>
            <mo>−<!-- − --></mo>
            <msub>
              <mi>P</mi>
              <mn>0</mn>
            </msub>
            <msup>
              <mrow class="MJX-TeXAtom-ORD">
		<mo stretchy="false">|</mo>
              </mrow>
              <mn>3</mn>
            </msup>
	  </mrow>
	</mfrac>
      </mrow>
    </math>
    <pre id="math-cubic-start">$$\kappa(0) = {2\over3}{(P_1-P_0)\times((P_0-P_1)+(P_2-P_1))\over|P_1-P_0|^3}$$</pre>
  </div>

  <div role="math" aria-describedby="math-cubic-end">
    <math xmlns="http://www.w3.org/1998/Math/MathML" display="block">
      <mi>κ<!-- κ --></mi>
      <mo stretchy="false">(</mo>
      <mn>1</mn>
      <mo stretchy="false">)</mo>
      <mo>=</mo>
      <mrow class="MJX-TeXAtom-ORD">
	<mfrac>
	  <mn>2</mn>
	  <mn>3</mn>
	</mfrac>
      </mrow>
      <mrow class="MJX-TeXAtom-ORD">
	<mfrac>
	  <mrow>
            <mo stretchy="false">(</mo>
            <msub>
              <mi>P</mi>
              <mn>3</mn>
            </msub>
            <mo>−<!-- − --></mo>
            <msub>
              <mi>P</mi>
              <mn>2</mn>
            </msub>
            <mo stretchy="false">)</mo>
            <mo>×<!-- × --></mo>
            <mo stretchy="false">(</mo>
            <msub>
              <mi>P</mi>
              <mn>1</mn>
            </msub>
            <mo>−<!-- − --></mo>
            <msub>
              <mi>P</mi>
              <mn>2</mn>
            </msub>
            <mo stretchy="false">)</mo>
	  </mrow>
	  <mrow>
            <mrow class="MJX-TeXAtom-ORD">
              <mo stretchy="false">|</mo>
            </mrow>
            <msub>
              <mi>P</mi>
              <mn>3</mn>
            </msub>
            <mo>−<!-- − --></mo>
            <msub>
              <mi>P</mi>
              <mn>2</mn>
            </msub>
            <msup>
              <mrow class="MJX-TeXAtom-ORD">
		<mo stretchy="false">|</mo>
              </mrow>
              <mn>3</mn>
            </msup>
	  </mrow>
	</mfrac>
      </mrow>
    </math>
    <pre id="math-cubic-end">$$\kappa(1) = {2\over3}{(P_3-P_2)\times((P_1-P_2)+(P_3-P_2))\over|P_3-P_2|^3}$$</pre>
  </div>

  <p>Where <var>κ(0)</var> and <var>κ(1)</var> are the
  signed curvatures at the start and end of the path segment
  respectively, and the <var>P</var>'s are the four points that define
  the cubic Bézier. Note, if
  <var>P<sub>0</sub></var> and <var>P<sub>1</sub></var>, or
  <var>P<sub>2</sub></var> and <var>P<sub>3</sub></var> are degenerate, the
  curvature will be infinite and a line should be used in constructing the join.</p>


<h2 id="refs" class="heading">4. References<a class="self-link" href="#refs"></a></h2>

<h3 id="normrefs" class="heading">4.1. Normative references<a class="self-link" href="#normrefs"></a></h3>

<dl>
  <dt id="ref-RFC2119"><strong class="normref">[RFC2119]</strong></dt>
  <dd><cite><a href="https://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a></cite>,
  S. Bradner, March 1997.
  <br/>Available at https://tools.ietf.org/html/rfc2119.</dd>

<!--
  <dt id="ref-SVG11"><strong class="normref">[SVG11]</strong></dt>
  <dd><cite class="w3crec"><a href="http://www.w3.org/TR/2003/REC-SVG11-20030114/">Scalable Vector Graphics (SVG) 1.1</a></cite>,
  J. Ferraiolo, <span class="ruby"><span class="rb">&#x85E4;&#x6CA2; &#x6DF3;</span><span class="rp">(</span><span class="rt"><span class="familyname">Fujisawa</span> Jun</span><span class="rp">)</span></span>, D. Jackson, eds.
  World Wide Web Consortium, 14 January 2003.
  <br />This edition of SVG 1.1 is http://www.w3.org/TR/2003/REC-SVG11-20030114/.
  <br />The <a href="http://www.w3.org/TR/SVG11/">latest edition of SVG 1.1</a> is available at http://www.w3.org/TR/SVG11/.</dd>
-->

  <dt id="ref-SVG2"><strong class="normref">[SVG2]</strong></dt>
  <dd><cite class="w3cwd"><a href="https://www.w3.org/TR/2015/WD-SVG2-20150409/">Scalable Vector Graphics (SVG) 2</a></cite>,
  N. Andronikos, T. Bah, A. Bellamy-Royds, B. Birtles, C. Concolato, E. Dahlström, C. Lilley, C. McCormack, D. Schepers, D. Schulze, R. Schwerdtfeger, S. Takagi, J. Watt, eds.
  World Wide Web Consortium, 09 April 2015.
  <br/>This edition of SVG 2 is https://www.w3.org/TR/2015/WD-SVG2-20150409/.
  <br/>The <a href="https://www.w3.org/TR/SVG2/">latest edition of SVG 2</a> is available at https://www.w3.org/TR/SVG2/.</dd>
</dl>

<!--
<h3 id="nonnormrefs">Non-normative references</h3>

<dl>
</dl>
-->

<h2 id="ChangesSinceSVG2" class="heading">5. Changes since SVG 2<a class="self-link" href="#ChangesSinceSVG2"></a></h2>

<ul>
  <li>Added the <a class="property" href="#StrokeAlignmentProperty">stroke-alignment</a>, <a class="property" href="#StrokeDashadjustProperty">stroke-dashadjust</a> and
  <a class="property" href="#StrokeDashcornerProperty">stroke-dashcorner</a> properties.</li>
</ul>

<!--
<h2 id="Acknowledgments">Acknowledgments</h2>

<p>...</p>
-->

<script src="//www.w3.org/scripts/TR/2016/fixup.js"></script></body>
</html>