<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional+edit//EN" "xhtml1-transitional+edit.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:edit="http://xmlns.grorg.org/SVGT12NG/">
<head>
  <title>Styling</title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
  <link rel="stylesheet"           title="Default"               type="text/css" media="screen" href="style/default_svg.css"/>
  <link rel="alternate stylesheet" title="No issues/annotations" type="text/css" media="screen" href="style/default_no_issues.css"/>
  <!--
  <link rel="alternate stylesheet" title="CSS3 Unmodified"       type="text/css" media="screen" href="style/default.css"/>
  <link rel="alternate stylesheet" title="SVG 1.1"               type="text/css" media="screen" href="style/svg-style.css"/>
  -->
  <!-- W3C style sheet will be added here during processing. -->
</head>
<body>

<div class='ready-for-wg-review'>
<h1>Styling</h1>

<h2 id="StylingUsingCSS">Styling SVG content using CSS</h2>

<p>Elements in an SVG document can be styled using CSS.
Most visual characteristics and some aspects of element
geometry are controlled using CSS <dfn id="TermProperty">properties</dfn>.
For example, the <a>'fill'</a> property controls the paint used to
fill the inside of a shape, and the <a>'width'</a> and
<a>'height'</a> properties are used to control the size
of a <a>'rect'</a> element.</p>

<p>SVG user agents must support all of the CSS styling
mechanisms described in this chapter.</p>

<p class="note">In SVG 1.1, support for inline style sheets
using the <a>'style element'</a> element and
<a>'style attribute'</a> was not required.  In SVG 2,
these are required.</p>


<h2 id="StyleElement">Inline style sheets: the <span class='element-name'>'style'</span> element</h2>

<div class="annotation svg2-requirement">
  <table>
    <tr>
      <th>SVG 2 Requirement:</th>
      <td>Add HTML5 <span class='element-name'>'style'</span> element attributes to SVG's <a>'style element'</a> element.</td>
    </tr>
    <tr>
      <th>Resolution:</th>
      <td><a href="http://www.w3.org/2011/10/28-svg-irc#T18-45-45">SVG 2 <span class='element-name'>'style'</span> element shall be aligned with the HTML5 <span class='element-name'>'style'</span> element.</a></td>
    </tr>
    <tr>
      <th>Purpose:</th>
      <td>To not surprise authors with different behavior for the <span class='element-name'>'style'</span> element in HTML and SVG content.</td>
    </tr>
    <tr>
      <th>Owner:</th>
      <td>Cameron (<a href="http://www.w3.org/Graphics/SVG/WG/track/actions/3277">ACTION-3277</a>)</td>
    </tr>
  </table>
</div>

<p>The <a>'style element'</a> element allows
style sheets to be embedded directly within SVG content.
SVG's <a>'style element'</a> element has the same
attributes as the
<a href="http://www.w3.org/TR/html5/document-metadata.html#the-style-element">corresponding
element in HTML</a>.</p>

<edit:elementsummary name='style'/>

<p><em>Attribute definitions:</em></p>

<dl class="attrdef-list">
  <dt>
    <table class="propdef attrdef">
      <tr>
        <th>Name</th>
        <th>Value</th>
        <th>Initial value</th>
        <th>Animatable</th>
      </tr>
      <tr>
        <td><dfn id="StyleElementTypeAttribute">type</dfn></td>
        <td>(see below)</td>
        <td>text/css</td>
        <td>no</td>
      </tr>
    </table>
  </dt>
  <dd>
    <p>This attribute specifies the style sheet language of
    the element's contents, as a <a href="http://www.ietf.org/rfc/rfc2046.txt">media type</a>.
    [<a href="refs.html#ref-RFC2046">RFC2046</a>].
    If the attribute is not specified, then the
    style sheet language is assumed to be CSS.</p>
  </dd>
  <dt>
    <table class="propdef attrdef">
      <tr>
        <th>Name</th>
        <th>Value</th>
        <th>Initial value</th>
        <th>Animatable</th>
      </tr>
      <tr>
        <td><dfn id="StyleElementMediaAttribute">media</dfn></td>
        <td>(see below)</td>
        <td>all</td>
        <td>no</td>
      </tr>
    </table>
  </dt>
  <dd>
    <p>This attribute specifies a media query that must be
    matched for the style sheet to apply.  Its value is parsed
    as a <a href="http://www.w3.org/TR/css3-mediaqueries/#syntax">media_query_list</a>.
    If not specified, the style sheet applies unconditionally.</p>
  </dd>
  <dt>
    <table class="propdef attrdef">
      <tr>
        <th>Name</th>
        <th>Value</th>
        <th>Initial value</th>
        <th>Animatable</th>
      </tr>
      <tr>
        <td><dfn id="StyleElementTitleAttribute">title</dfn></td>
        <td>(see below)</td>
        <td>(none)</td>
        <td>no</td>
      </tr>
    </table>
  </dt>
  <dd>
    <p>This attribute specifies a title for the style sheet,
    which is used when exposing and selecting between alternate
    style sheets.  The attribute takes any value.</p>
  </dd>
</dl>

<p>The semantics and processing of a <a>'style element'</a> and its
attributes must be the same as is defined for the
<a href="http://www.w3.org/TR/html5/document-metadata.html#the-style-element">HTML
<span class='element-name'>'style'</span> element</a>.</p>


<h2 id="LinkElement">External style sheets: the effect of the HTML <span class='element-name'>'link'</span> element</h2>

<p>An <a href="http://www.w3.org/TR/html5/document-metadata.html#the-link-element">HTML
<span class='element-name'>'link'</span> element</a> in an SVG document (that is,
an element in the HTML namespace with local name "link")
with its <span class='attr-name'>'rel'</span>
attribute set to <span class='attr-value'>'stylesheet'</span> must be processed
as defined in the HTML specification and cause external style sheets to be
loaded and applied to the document.  Such elements in HTML documents outside
of an inline SVG fragment must also apply to the SVG content.</p>

<p class='note'>Because the element is required to be in the HTML namespace, it
is not possible for an <a href="http://www.w3.org/TR/html5/document-metadata.html#the-link-element">HTML
<span class='element-name'>'link'</span> element</a> to be parsed as
part of an inline SVG fragment in a text/html document.  However, when
parsing an SVG document using XML syntax, XML namespace declarations
can be used to place the element in the HTML namespace.</p>

<div class='note'>
  <p>Note that an alternative way to reference external style sheets
  without using the <a href="http://www.w3.org/TR/html5/document-metadata.html#the-link-element">HTML
  <span class='element-name'>'link'</span> element</a> is to use an @import
  rule in an inline style sheet.  For example:</p>

  <pre><![CDATA[<svg xmlns="http://www.w3.org/2000/svg">
  <style>
    @import url(mystyles.css);
  </style>
  <rect .../>
</svg>]]></pre>

  <p>would behave similarly to:</p>

  <pre><![CDATA[<svg xmlns="http://www.w3.org/2000/svg">
  <link xmlns="http://www.w3.org/1999/xhtml" rel="stylesheet" href="mystyles.css" type="text/css"/>
  <rect .../>
</svg>]]></pre>
</div>

<h2 id="ElementSpecificStyling">Element-specific styling: the <span class='attr-name'>'class'</span> and <span class='attr-name'>'style'</span> attributes</h2>

<p>As with HTML, SVG supports the <a>'class'</a> and <a>'style attribute'</a>
attributes on all elements to support element-specific styling.</p>

<p><em>Attribute definitions:</em></p>

<div class="adef-list">
  <dl class='attrdef-list'>
    <dt>
      <table class="propdef attrdef">
        <tr>
          <th>Name</th>
          <th>Value</th>
          <th>Initial value</th>
          <th>Animatable</th>
        </tr>
        <tr>
          <td><dfn id="ClassAttribute" data-dfn-for="core-attributes" data-dfn-type="element-attr">class</dfn></td>
          <td><a href="https://html.spec.whatwg.org/#set-of-space-separated-tokens">set of space-separated tokens</a> <span class="syntax">[HTML]</span></td>
          <td>(none)</td>
          <td>yes</td>
        </tr>
      </table>
    </dt>
    <dd>
      <p>The <a>'class'</a> attribute assigns one or more class names to an element,
      which can then be used for addressing by the styling language.</p>
    </dd>
    <dt>
      <table class="propdef attrdef">
        <tr>
          <th>Name</th>
          <th>Value</th>
          <th>Initial value</th>
          <th>Animatable</th>
        </tr>
        <tr>
          <td><dfn id="StyleAttribute" data-dfn-for="core-attributes" data-dfn-type="element-attr">style</dfn></td>
          <td>(see below)</td>
          <td>(none)</td>
          <td>no</td>
        </tr>
      </table>
    </dt>
  <dd>
    <p>The <a>'style attribute'</a> attribute is used to supply a
    CSS declaration of an element.  The attribute is parsed using
    the CSS <a href="http://www.w3.org/TR/css3-syntax/#parse-a-declaration">parse a declaration</a>
    algorithm.</p>
  </dd>
</dl>
</div>

<p>Aside from the way that the <a>'class'</a> attribute is reflected in the
SVG DOM (in the <a href="types.html#__svg__SVGElement__className">className</a>
IDL attribute on <a>SVGElement</a>), the semantics and behavior of the
<a>'class'</a> and <a>'style attribute'</a> attributes must be the same
as that for <a href="http://www.w3.org/TR/html5/dom.html#global-attributes">the corresponding
attributes in HTML</a>.</p>

<div class='example'>
  <p>In the following example, the <a>'text'</a> element is used in
  conjunction with the <a>'class'</a>
  attribute to markup document messages. Messages appear in both
  English and French versions.</p>

  <pre>
&lt;!-- English messages --&gt;
&lt;text class="info" lang="en"&gt;Variable declared twice&lt;/text&gt;
&lt;text class="warning" lang="en"&gt;Undeclared variable&lt;/text&gt;
&lt;text class="error" lang="en"&gt;Bad syntax for variable name&lt;/text&gt;
&lt;!-- French messages --&gt;
&lt;text class="info" lang="fr"&gt;Variable déclarée deux fois&lt;/text&gt;
&lt;text class="warning" lang="fr"&gt;Variable indéfinie&lt;/text&gt;
&lt;text class="error" lang="fr"&gt;Erreur de syntaxe pour variable&lt;/text&gt;</pre>

  <p>The following CSS style
  rules would tell visual user agents to display informational
  messages in green, warning messages in yellow, and error
  messages in red:</p>

  <pre>
text.info    { fill: green; }
text.warning { fill: yellow; }
text.error   { fill: red; }</pre>
</div>

<div class='example'>
  <p>This example shows how the <a>'style attribute'</a> attribute can be
  used to style <a>'text'</a> elements similarly to the previous example:</p>

  <pre>
&lt;text style="fill: green;" lang="en"&gt;Variable declared twice&lt;/text&gt;
&lt;text style="fill: yellow;" lang="en"&gt;Undeclared variable&lt;/text&gt;
&lt;text style="fill: red;" lang="en"&gt;Bad syntax for variable name&lt;/text&gt;</pre>
</div>


<h2 id="PresentationAttributes">Presentation attributes</h2>

<p>Some styling properties can be specified not only in style sheets
and <a>'style attribute'</a> attributes, but also in
<dfn id="TermPresentationAttribute">presentation attributes</dfn>.
These are attributes whose name matches (or is similar to) a given CSS property
and whose value is parsed as a value of that property.  Presentation
attributes contribute to the
<a href="https://drafts.csswg.org/css-cascade-3/#preshint">author level</a>
of the cascade, following all other author-level style sheets,
and have specificity 0.</p>

<p>Since presentation attributes are parsed as CSS values, an
<a href="http://www.w3.org/TR/2011/REC-CSS2-20110607/cascade.html#important-rules"><span class="prop-value">!important</span> declaration</a>
within a presentation attribute will cause it to have an <a>invalid value</a>.
See <a href="types.html#presentation-attribute-css-value">Attribute syntax</a>
for details on how presentation attributes are parsed.</p>

<p>Not all properties supported by an implementation have a corresponding
presentation attribute, and not all presentation attributes are supported
on all SVG elements.  Also, only elements in the SVG namespace support
presentation attributes.  The availability of a presentation attribute for
a given property is described in the following table:</p>

<table class="vert" style="font-size: 90%">
  <tr>
    <th style="width: 50%">Properties with a presentation attribute</th>
    <th style="width: 50%">Elements that support the presentation attribute</th>
  </tr>
  <tr>
    <td>
      <a>'alignment-baseline'</a>,
      <a>'baseline-shift'</a>,
      <a>'clip'</a>,
      <a>'clip-path'</a>,
      <a>'clip-rule'</a>,
      <a>'color'</a>,
      <a>'color-interpolation'</a>,
      <a>'color-interpolation-filters'</a>,
      <a>'color-rendering'</a>,
      <a>'cursor property'</a>,
      <a>'direction'</a>,
      <a>'display'</a>,
      <a>'dominant-baseline'</a>,
      <a>'fill'</a>,
      <a>'fill-opacity'</a>,
      <a>'fill-rule'</a>,
      <a>'filter property'</a>,
      <a>'flood-color'</a>,
      <a>'flood-opacity'</a>,
      <a>'font-family'</a>,
      <a>'font-size'</a>,
      <a>'font-size-adjust'</a>,
      <a>'font-stretch'</a>,
      <a>'font-style'</a>,
      <a>'font-variant'</a>,
      <a>'font-weight'</a>,
      <a>'glyph-orientation-horizontal'</a>,
      <a>'glyph-orientation-vertical'</a>,
      <a>'image-rendering'</a>,
      <a>'inline-size'</a>,
      <a>'letter-spacing'</a>,
      <a>'lighting-color'</a>,
      <a>'marker-end'</a>,
      <a>'marker-mid'</a>,
      <a>'marker-start'</a>,
      <a>'mask property'</a>,
      <a>'opacity'</a>,
      <a>'overflow'</a>,
      <a>'paint-order'</a>,
      <a>'pointer-events'</a>,
      <a>'shape-rendering'</a>,
      <a>'solid-color'</a>,
      <a>'solid-opacity'</a>,
      <a>'stop-color'</a>,
      <a>'stop-opacity'</a>,
      <a>'stroke'</a>,
      <a>'stroke-dasharray'</a>,
      <a>'stroke-dashoffset'</a>,
      <a>'stroke-linecap'</a>,
      <a>'stroke-linejoin'</a>,
      <a>'stroke-miterlimit'</a>,
      <a>'stroke-opacity'</a>,
      <a>'stroke-width'</a>,
      <a>'text-anchor'</a>,
      <a>'text-decoration'</a>,
      <a>'text-overflow'</a>,
      <a>'text-rendering'</a>,
      <a>'transform'</a>,
      <a>'unicode-bidi'</a>,
      <a>'vector-effect'</a>,
      <a>'visibility'</a>,
      <a>'white-space'</a>,
      <a>'word-spacing'</a>,
      <a>'writing-mode'</a>
    </td>
    <td>
      <a>descriptive elements</a>, <a>graphics elements</a>,
      <a>text content elements</a>, <a>container elements</a>,
      <a>paint server elements</a>, <a>'clipPath'</a>, <a>'cursor element'</a>,
      <a>'feFlood'</a>, <a>'filter element'</a> and <a>'stop'</a>
    </td>
  </tr>
  <tr>
    <td>
      <a>'cx'</a>,
      <a>'cy'</a>
    </td>
    <td>
      <a>'circle'</a> and <a>'ellipse'</a>
    </td>
  </tr>
  <tr>
    <td>
      <a>'height'</a>, <a>'width'</a>, <a>'x'</a>, <a>'y'</a>
    </td>
    <td>
      <a>'foreignObject'</a>,
      <a>'image'</a>,
      <a>'mask element'</a>,
      <a>'rect'</a> and
      <a>'svg'</a>
    </td>
  </tr>
  <tr>
    <td>
      <a>'r'</a>
    </td>
    <td>
      <a>'circle'</a>
    </td>
  </tr>
  <tr>
    <td>
      <a>'rx'</a>, <a>'ry'</a>
    </td>
    <td>
      <a>'ellipse'</a> and <a>'rect'</a>
    </td>
  </tr>
</table>

<p class='note'>Since presentation attributes are only available
on elements in the SVG namespace, an HTML <code>video</code> element is
classified as a <a>graphics element</a>, for example, but does not support
any presentation attributes.</p>

<p class='note'>Note that <span class='attr-name'>'x'</span>,
<span class='attr-name'>'y'</span>,
<span class='attr-name'>'width'</span> and
<span class='attr-name'>'height'</span> attributes are not
always presentation attributes.
For example, the <a>'tspan/x'</a> attribute on <a>'text'</a> and <a>'tspan'</a>
is not a presentation attribute for the <a>'x'</a> property.</p>

<p>The following table lists the presentation attributes whose
names are different from their corresponding property.  All
other presentation attributes have names that do match
their property.</p>

<table class='vert' style='font-size: 90%'>
  <tr><th>Property</th><th>Element</th><th>Presentation attribute name</th></tr>
  <tr><td><a>'transform'</a></td><td><a>'linearGradient'</a> and <a>'radialGradient'</a></td><td><span class='attr-name'>'gradientTransform'</span></td></tr>
  <tr><td><a>'transform'</a></td><td><a>'pattern'</a></td><td><span class='attr-name'>'patternTransform'</span></td></tr>
</table>

<p>Animation of presentation attributes is equivalent to
animating the corresponding property.</p>

<h2 id="RequiredProperties">Required properties</h2>

<p>The following properties must be supported by all SVG user agents:</p>

<ul>
  <li>all properties defined in this specification</li>
  <li>the <a>'clip'</a>, <a>'clip-path'</a>, <a>'clip-rule'</a> and
  <a>'mask property'</a> properties [<a href='refs.html#ref-CSS-MASKING'>CSS-MASKING</a>]</li>
  <li>the <a>'color'</a> and <a>'opacity'</a> properties [<a href='refs.html#ref-CSS3COLOR'>CSS3COLOR</a>]</li>
  <li>the <a>'color-interpolation-filters'</a>, <a>'filter property'</a>,
  <a>'flood-color'</a>, <a>'flood-opacity'</a>, <a>'isolation property'</a>
  and <a>'lighting-color'</a> properties [<a href='refs.html#ref-FILTERS'>FILTERS</a>]</li>
  <li>the <a>'direction'</a>, <a>'text-orientation'</a> and
  <a>'writing-mode'</a> properties [<a href='refs.html#ref-CSSWRITINGMODES3'>CSSWRITINGMODES3</a>]</li>
  <li>the <a>'inline-size'</a> property</li>
  <li>the <a>'cursor property'</a> and <a>'text-overflow'</a> property [<a href='refs.html#ref-CSS3UI'>CSS3UI</a>]</li>
  <li>the <a>'display'</a>, <a>'letter-spacing'</a>, <a>'overflow'</a>, <a>'text-decoration'</a>, <a>'visibility'</a>, <a>'white-space'</a> and <a>'word-spacing'</a> properties [<a href='refs.html#ref-CSS21'>CSS21</a>]</li>
  <li>the <a>'font'</a>, <a>'font-family'</a>, <a>'font-size'</a>,
  <a>'font-size-adjust'</a>, <a>'font-stretch'</a>, <a>'font-style'</a>,
  <a>'font-variant'</a> and <a>'font-weight'</a> properties [<a href='refs.html#ref-CSS3FONTS'>CSS3FONTS</a>]</li>
  <li>the <a>'transform'</a> and <a>'transform-origin'</a> properties [<a href='refs.html#ref-CSS3TRANSFORMS'>CSS3TRANSFORMS</a>]</li>
</ul>

<p class='issue' data-issue="45">For <a>'white-space'</a> we should point to css-text-4 since that is
where the keyword value that allows us to map <span class='attr-name'>'xml:space'</span>
is in that spec.</p>


<h2 id="UAStyleSheet">User agent style sheet</h2>

<p>The following <a href="http://www.w3.org/TR/2011/REC-CSS2-20110607/cascade.html#cascade">user
agent style sheet</a> must be applied in all SVG user agents.</p>

<pre>
@namespace url(http://www.w3.org/2000/svg);
@namespace xml url(http://www.w3.org/XML/1998/namespace);

svg:not(:root), hatch, image, marker, pattern, symbol { overflow: hidden; }

*:not(svg),
*:not(foreignObject) > svg {
  transform-origin: 0 0;
}

*[xml|space=preserve] {
  white-space: preserve-spaces;
}
</pre>

<p class='issue' data-issue="46">Need to confirm that preserve-spaces is the final valuee
that gets added to the <a>'white-space'</a> shorthand in css-text-4.</p>

<p class='note'>CSS Transforms defines that the initial value for
<a>'transform-origin'</a> is <span class='prop-value' style='white-space: nowrap'>50% 50%</span>.
Since elements in SVG must, by default, transform around their origin at (0, 0),
<a>'transform-origin'</a> is overridden and set to a default value of
<span class='prop-value' style='white-space: nowrap'>0 0</span> for all SVG elements (except
for root <a>'svg'</a> elements and <a>'svg'</a> elements
that are the child of a <a>'foreignObject'</a> element, as these elements must
transform around their center). [<a href="refs.html#ref-CSS3TRANSFORMS">CSS3TRANSFORMS</a>]</p>


<h2 id="RequiredCSSFeatures">Required CSS features</h2>

<p>Besides the features described above, the following CSS features must be
also supported in SVG user agents:</p>

<ul>
  <li>in XML documents, external CSS style sheets using the
  <a href="http://www.w3.org/1999/06/REC-xml-stylesheet-19990629/">&lt;?xml-stylesheet?&gt;</a>
  processing instruction [<a href="refs.html#ref-XML-SS">XML-SS</a>]</li>

  <li><a href="http://www.w3.org/TR/2011/REC-CSS2-20110607/media.html#at-media-rule">@media</a>,
  <a href="http://www.w3.org/TR/2011/REC-CSS2-20110607/cascade.html#at-import">@import</a>
  and <a href="http://www.w3.org/TR/2011/REC-CSS2-20110607/syndata.html#charset">@charset</a>
  rules within style sheets, as defined in CSS 2.1</li>

  <li><a href="http://www.w3.org/TR/2011/WD-css3-fonts-20111004/#font-face-rule">@font-face</a> rules
  within style sheets [<a href="refs.html#ref-CSS3FONTS">CSS3FONTS</a>]</li>

  <li>all pseudo-classes defined in CSS 2.1 (including :hover, :link, :active, :visited, :focus, :first-child and :lang)</li>

  <li>the ::first-letter and ::first-line pseudo-elements defined in CSS 2.1 (on <a>'text'</a> elements)</li>
</ul>


<h2 id='StyleSheetsInHTMLDocuments'>Style sheets in HTML documents</h2>

<p>When an SVG <a>'style element'</a> or an HTML
<span class='attr-name'>'style'</span> element is used in an HTML
document, those style sheets must apply to all HTML and
inline SVG content in the document.  Similarly, any HTML
<span class='attr-name'>'style'</span> element used in an SVG
document must also apply its style sheet to the document.</p>


<h2 id="DOMInterfaces">DOM interfaces</h2>

<h3 id="InterfaceSVGStyleElement">Interface SVGStyleElement</h3>

<edit:with element="style">

<p>An <a>SVGStyleElement</a> object represents a <a>'style element'</a> element
in the DOM.</p>

<pre class="idl">interface <b>SVGStyleElement</b> : <a>SVGElement</a> {
  attribute DOMString <a href="styling.html#__svg__SVGStyleElement__type">type</a>;
  attribute DOMString <a href="styling.html#__svg__SVGStyleElement__media">media</a>;
  attribute DOMString <a href="styling.html#__svg__SVGStyleElement__title">title</a>;
};

<a>SVGStyleElement</a> implements <a>LinkStyle</a>;</pre>

<p>The <b id="__svg__SVGStyleElement__type">type</b>,
<b id="__svg__SVGStyleElement__media">media</b> and
<b id="__svg__SVGStyleElement__title">title</b> IDL attributes
<a>reflect</a> the <a>'type'</a>, <a>'media'</a> and <a>'title'</a>
content attributes, respectively.</p>

</edit:with>
</div>

</body>
</html>
