<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional+edit//EN" "xhtml1-transitional+edit.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:edit="http://xmlns.grorg.org/SVGT12NG/">
<head>
  <title>Color</title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
  <link rel="stylesheet"           title="Default"               type="text/css" media="screen" href="style/default_svg.css"/>
  <link rel="alternate stylesheet" title="No issues/annotations" type="text/css" media="screen" href="style/default_no_issues.css"/>
  <!--
  <link rel="alternate stylesheet" title="CSS3 Unmodified"       type="text/css" media="screen" href="style/default.css"/>
  <link rel="alternate stylesheet" title="SVG 1.1"               type="text/css" media="screen" href="style/svg-style.css"/>
  -->
  <!-- W3C style sheet will be added here during processing. -->
</head>
<body>

<h1>Color</h1>

<div class="annotation svg2-requirement">
  <table>
    <tr>
      <th>SVG 2 Requirement:</th>
      <td>Support color management.</td>
    </tr>
    <tr>
      <th>Resolution:</th>
      <td><a href="http://www.w3.org/2011/10/28-svg-irc#T16-52-12">SVG 2 will depend on SVG color management subject to deciding the exact conformance classes required.</a></td>
    </tr>
    <tr>
      <th>Purpose:</th>
      <td>To align with mainstream graphcs use, allow fluorescent colors, more than 8 bit color, etc.</td>
    </tr>
    <tr>
      <th>Owner:</th>
      <td>Chris (<a href="http://www.w3.org/Graphics/SVG/WG/track/actions/3160">ACTION-3160</a>)</td>
    </tr>
    <tr>
      <th>Note:</th>
      <td>SVG color management will become a chapter in SVG 2, no longer an independent module.</td>
    </tr>
  </table>
</div>

<div class="annotation svg2-requirement">
  <table>
    <tr>
      <th>SVG 2 Requirement:</th>
      <td>Support CSS3 Color syntax.</td>
    </tr>
    <tr>
      <th>Resolution:</th>
      <td><a href="http://www.w3.org/2011/07/29-svg-minutes.html#item08">SVG 2 will depend on CSS3 Color.</a></td>
    </tr>
    <tr>
      <th>Purpose:</th>
      <td>To align with CSS, given CSS3 Color is widely implemented.</td>
    </tr>
    <tr>
      <th>Owner:</th>
      <td>Chris (no action)</td>
    </tr>
  </table>
</div>


<h2 id="ColorIntroduction">Introduction</h2>
  
<p class="normativity"><em>This introduction is informative, not normative.</em></p>
  
  <p>Several properties used in SVG take a color specification. Also, external media such as images or video
  contain colors.</p>

<p>All SVG colors used as property values include a fallback specified in the sRGB color space
[<a href="refs.html#ref-SRGB">SRGB</a>]. </p>

<p>Additionally, SVG content can specify an alternate color specification
using an ICC profile [<a href="refs.html#ref-ICC42">ICC42</a>].
<!-- check paint chapter for content that should be here, and move it -->
If ICC-based colors are provided,
then the ICC-based color takes precedence over the sRGB color specification;
otherwise, the sRGB fallback colors will be used.
Note that, in this specification, by default color interpolation occurs in sRGB color space even if an
ICC-based color specification is provided, but this can be changed (see <a>'color-interpolation'</a>).</p>
  
  <div class="ready-for-wider-review">
    <h2 id="color-managed-images">Color-managed images</h2>
    
    <p class="note">
      New in SVG 2.</p>
    
    <p>Implementations of SVG 2 are required to color-manage all images. The embedded profile is used. If there is no embedded profile, sRGB is assumed, for RGB images.</p>
      
    <p class="issue">Define processing for untagged greyscale and CMYK images. Could be a default profile, or an 'explicitly undefined' with a warning to avoid untagged non-RGB images when authoring.</p>

    <p class="issue">References to "SVG 2 User Agent" might need to be replaced
    with one of the conformance classes listed in the <a href="conform.html">Conformance</a>
    appendix.</p>
    
    <p><span class="requirement" id="assert_taggedImages">If a referenced image
    contains color profile information, a SVG 2 User Agent MUST use that profile
    to render the image.</span>
    <span class="requirement" id="assert_untaggedImages">Otherwise,
    if a referenced image contains no color profile information, a
    SVG 2 User Agent MUST use the sRGB profile to render the image.</span></p>
    

    <h2 id="Color_syntax">Color syntax</h2>
    
    
    <h3 id="sRGBcolor">
      sRGB colors</h3>
    
    <p  class="prop-value"><a href="#color">&lt;color&gt;</a></p>
    
    <p>Example (these all represent the same color):</p>
    <div class="example">
      <pre>
&lt;circle fill="rgb(205,133,63)"/>
&lt;circle fill="peru"/>
&lt;circle fill="rgb(80.392%, 52.157%, 24.706%)"/>
&lt;circle fill="#CD853F"/>
&lt;circle fill="hsl(30, 59%, 53%)"/></pre>
      </div>
    
    <p class="note">
       Includes all syntactic forms supported by  SVG 1.1, adds hsl() from  [<a href="refs.html#ref-CSS3COLOR">CSS3COLOR</a>].</p>
    <p class="note">See the CSS Color Module Level 3 specification for the
      definition of the color type.
      [<a href="refs.html#ref-CSS3COLOR">CSS3COLOR</a>]</p>
    
    <div class="requirement" id="assert_base_syntax">
      <p>All the syntactic forms for an sRGB color, including the full set of color keywords, shall be supported by an SVG 2 User Agent.</p>
    </div>
    
    <p>The rendering requirements for sRGB colors are more strict than for SVG 1.1  User Agents,
      where color management is optional.</p>
    <div class="requirement" id="assert_render_sRGB">
      <p>
        When an sRGB color is used - because it is the sole color specification, or in a
        permitted fallback situation - a conformant SVG 2 User Agent 
        shall render it in conformance with the ICC profile for sRGB, to obtain the
        desired color appearance.
      </p>
    </div>
    
    <p class="issue">
      Define 'permitted fallback situation' and link to it.
    </p>
    
    <h3 id="sRGBcoloralpha">
      sRGB colors with alpha</h3>
    
    <p  class="prop-value"><a href="#color">rgba(r, g, b, a)</a></p>
    
    <p>Example </p>
    <div class="example">
      <pre>
&lt;circle fill="rgba(205,133,63, 0.5)"/></pre>
      </div>

    
    <p class="note">
      New in SVG 2, added from  [<a href="refs.html#ref-CSS3COLOR">CSS3COLOR</a>].</p>
    
    <div class="requirement" id="assert_combine-alpha">
      <p>When an sRGB color with alpha is used in a property value,  an SVG 2 User Agent shall combine the alpha value with any separately specified alpha value that applies to that property, by multiplying the alpha values together.</p>
    </div>
    
    <p>Example (these render as the same color)</p>
    <div class="example">
      <pre>
&lt;circle fill="rgba(205,133,63, 0.25)"/>
&lt;circle fill="rgba(205,133,63, 1.0)" fill-opacity="0.25"/>
&lt;circle fill="rgba(205,133,63, 0.5)" fill-opacity="0.5"/></pre>
</div>
    
   
    <div class="requirement" id="assert_render_sRGB_alpha">
      <p>
        When an sRGB color with alpha is used - because it is the sole color specification, or in a
        permitted fallback situation - a conformant SVG 2 User Agent 
        shall render it in conformance with the ICC profile for sRGB, to obtain the
        desired color appearance.
      </p>
    </div>
    
    <h3 id="icc-colors">
      ICC colors</h3>
    
    <p  class="prop-value"><a href="#fallback">&lt;fallback&gt;</a>
      <a href="#icccolor"> icc-color(&lt;name&gt; [,&lt;icccolorvalue&gt;]*)</a></p>
    
    <p>Example:</p>
    <div class="example">
      <pre>
&lt;style>
@color-profile {
  name: acmecmyk;
  src: url(http://printers.example.com/acmecorp/model1234);
}
&lt;/style>
&lt;circle fill="#CD853F icc-color(acmecmyk, 0.11, 0.48, 0.83, 0.00)"/></pre>
    </div>
    
    <p>Example:</p>
    <div class="example">
      <pre>
&lt;color-profile name="acmecmyk" href="http://printers.example.com/acmecorp/model1234"/>
&lt;circle fill="#CD853F icc-color(acmecmyk, 0.11, 0.48, 0.83, 0.00)"/></pre>
      </div>
    
    <p class="note">Same syntax as SVG 1.1, increased conformance requirement.</p>
    
    <p>SVG 2  uses the extended ICC color specification from SVG 1.1.  In SVG 1.1,  parsing the syntax was required but implementing the ICC colour itself  was optional,  as indicated by  phrases such as "If ICC-based colors are provided and the SVG user agent supports ICC color, then...". An SVG 1.1 user agent which also conforms to this specification "supports ICC color" for the purposes of conforming to SVG 1.1.</p>
    
    <p>
      As with SVG Full 1.1, SVG 2 content may specify color using an ICC profile (see
      [<a href="refs.html#ref-ICC42">ICC42</a>]); an sRGB fallback must still be provided.
    </p>
    
    <p>An SVG 2 User Agent searches the color profile description database for
      a <a href="#ColorProfileDescriptions">color profile description</a> entry whose
      name descriptor matches &lt;name&gt; and uses the last matching entry that is found;
      painting shall be done using the given ICC color, where the comma-separated list
      (with optional white space) of <strong>&lt;icccolorvalue&gt;</strong>'s is a set
      of ICC-profile-specific color values, expressed as <a>&lt;number&gt;</a>s
      (see <a href="#icc-colors">ICC colors</a>). If no match is
      found, then the fallback sRGB color is used.
    </p>
    
    <div class="requirement" id="assert_ICCColorPrecedence">
      <p>
        If ICC-based colors are provided, an SVG 2 User Agent
        MUST use the the ICC-based color in preference to the sRGB fallback color,
        unless the ICC color profile cannot be used (is unavailable, malformed, or uses an unsupported profile connection
        space).</p>
    </div>
    <div class="requirement" id="assert_useICC">
      <p>When rendering, if both ICC and sRGB fallback colors are provided and the referenced ICC profile can be used, a SVG 2 User Agent MUST render using the ICC color values, using the specified ICC profile as the input profile.</p>
    </div>
    
    <h3 id="LAB">LAB color</h3>
    
    <p class="note">
      New in SVG 2.</p>
    
    <p   class="prop-value"><a href="#fallback">&lt;fallback&gt;</a> 
      <a href="#cielabcolor">cielab(&lt;Lightness&gt;, &lt;a&gt; &lt;b&gt;)</a> | <br />
      <a href="#fallback">&lt;fallback&gt;</a>
      <a href="#cielchabcolor">cielchab(&lt;Lightness&gt; &lt;Chroma&gt;, &lt;Hue&gt; )</a>
    </p>
    
<div class="example">
    <pre>
&lt;circle fill="#CD853F cielab(62.253188, 23.950124, 48.410653)"/>
&lt;circle fill="#CD853F cielch(62.253188, 54.011108, 63.677091)"/>
</pre>
    </div>
  
    
    <p>An SVG 2 User Agent directly uses the CIE LAB or CIE LCHab values, where the comma-separated list
      (with optional white space) of <strong>&lt;icccolorvalue&gt;</strong>'s is a set
      of Lightness, a and b or Lightness, Hue and Chroma values, expressed as
      <a>&lt;number&gt;</a>s. A color profile is not referenced in the SVG, although profile-based implementations may 
    choose to implement this by providing and using an LAB profile.</p>
          
          <p>The white point  is D50, which is the whitepoint defined by the CIE for CIELab profile connection space and the 
            whitepoint used for image editors that provide LAB functionality.
          LAB measurements relative to a different whitepoint should be adapted to D50 to be used in SVG 2; the linear Bradford chromatic adaptation transform [<a href="refs.html#ref-BRADFORD">BRADFORD</a>] is suggested for this.</p>
    
    <div class="requirement" id="assert_LABColorPrecedence">
      <p>
        If LAB-based colors are provided, an SVG 2 User Agent
        MUST use the the LAB-based color in preference to the sRGB fallback color.</p>
    </div>
    <div class="requirement" id="assert_useLAB">
      <p>When rendering, if both LAB and sRGB fallback colors are provided, a SVG 2 User Agent MUST render using the ICC color values, using the specified ICC profile as the input profile.</p>
    </div>
          
          <p>A fallback sRGB color must still be provided, for non-color-managed user agents.</p>
    
    <h3 id="named">
    ICC named color</h3>
    
    <p class="note">
      New in SVG 2.</p>
    
    
    <p   class="prop-value"><a href="#fallback">&lt;fallback&gt;</a>
      <a href="#iccnamedcolor">icc-named-color(&lt;name&gt;, &lt;namedColor&gt;)</a></p>
    
    <p>Example:</p>
    <div class="example">
    <pre >
&lt;color-profile name="FooColors" href="http://swatches.example.com/Foo"/>
&lt;circle fill="#CD853F icc-color(FooColors, Sandy23C)"/></pre>
      </div>
    
    <p>
      SVG 2 introduces the ability to specify a color using a 'Named Color Profile'.
    </p>
    <p>An SVG 2 User Agent searches the color profile description database for
      a <a href="#ColorProfileDescriptions">color profile description</a> entry whose
      name descriptor matches &lt;name&gt; and uses the last matching entry that is found;
      painting shall be done using the given ICC color, where namedColor is a
      &lt;string&gt; indicating the named color to use.</p>
    
    <p class="issue">This might need to be an &lt;ident&gt; rather than a &lt;string&gt;.</p>

    <p>ICC named color profiles provide a platform- and implementation-neutral way
    to share a swatch of colors, or to use user-created names for colors.</p>
    
    <div class="requirement" id="assert_ICCNamedColorPrecedence">
      <p>
        If ICC-based named colors are provided, a conformant SVG 2 User Agent 
        MUST use the the ICC-based named color in preference to the sRGB fallback
        color, unless the ICC named color profile is unavailable, malformed, or uses a profile
        connection space other than CIE XYZ or CIE LAB.</p>
    </div>
    <div class="requirement" id="assert_useICCNamed">
      <p>
        When an ICC named color is used, a conformant SVG 2 User Agent 
        shall render it in conformance with the specified ICC profile to obtain the
        desired color appearance.</p>
    </div>
    
  </div>
  
<div class="ready-for-wider-review">
  <h2 id="Unmanaged">Unmanaged colors</h2>
  <h3 id="device">
  Uncalibrated device color</h3>
  
  <p class="note">
    New in SVG 2.</p>
  
  <p  class="prop-value"><a href="#fallback">&lt;fallback&gt;</a>
    <a href="#devicegray">device-gray(&lt;gray&gt;)</a> |  <br />
    <a href="#fallback">&lt;fallback&gt;</a>
    <a href="#devicergb">device-rgb(&lt;red&gt; &lt;green&gt; &lt;blue&gt;)</a> |  <br />
    <a href="#fallback">&lt;fallback&gt;</a>
    <a href="#devicecmyk">device-cmyk(&lt;cyan&gt; &lt;magenta&gt; &lt;yellow&gt; 
      &lt;black&gt;)</a> |  <br />
    <a href="#fallback">&lt;fallback&gt;</a>
    <a href="#devicegray">device-nchannel(&lt;number&gt;+)</a> |
  </p>
  
 
  <div class="example">
  <pre>
&lt;circle fill="#CD853F device-cmyk(0.11, 0.48, 0.83, 0.00)"/></pre>
  </div>
  
  <p>
    SVG 2  introduces a method of specifying uncalibrated device colors. This
    is sometimes useful in print workflows, for example to produce patches of known 
    ink density used for quality control purposes. </p>
  
  <p>An SVG 2 User Agent which supports the indicated class of output device
    will pass the values through without color management. If the class of output device 
    (for example, cmyk) is not supported, then the fallback
    sRGB color is used.
  </p>
  <p>
    As these are uncalibrated, any interpolation or compositing occurs using the fallback
    sRGB color value.</p>
  
</div>

<div class="ready-for-wider-review">
<h2 id="ColorProperty">The effect of the <span class="property">'color'</span> property</h2>

<p class="note">See the CSS Color Module Level 3 specification for the
definition of <a>'color'</a>.
[<a href="refs.html#ref-CSS3COLOR">CSS3COLOR</a>]</p>

<p>The <a>'color'</a> property is used to provide a potential indirect value,
<span class="prop-value">currentColor</span>, for the <a>'fill'</a>,
<a>'stroke'</a>, <a>'solid-color'</a>, <a>'stop-color'</a>, <a>'flood-color'</a> and
<a>'lighting-color'</a> properties.  The property has no other effect
on SVG elements.</p>

<div class="example">
  <p>The following example shows how the inherited value of the
  <a>'color'</a> property from an HTML document can be used to
  set the color of SVG text in an inline SVG fragment.</p>

  <pre><![CDATA[
<!DOCTYPE html>
<style>
body { color: #468; font: 16px sans-serif }
svg { border: 1px solid #888; background-color: #eee }
</style>
<p>Please see the diagram below:</p>
<svg width="200" height="100">
  <g fill="currentColor">
    <text x="70" y="55" text-anchor="end">START</text>
    <text x="130" y="55">STOP</text>
    <path d="M 85,45 h 25 v -5 l 10,10 -10,10 v -5 h -25 z"/>
  </g>
</svg>
]]></pre>

  <div class="figure">
    <div class="bordered" style="color: #468; font: 16px sans-serif; display: inline-block; text-align: left; padding: 32px 128px 32px 32px">
      <p style="margin-top: 0; margin-bottom: 1em">Please see the diagram below:</p>
      <svg xmlns="http://www.w3.org/2000/svg" width="200" height="100" style="border: 1px solid #888; background-color: #eee">
        <g fill="currentColor">
          <text x="70" y="55" text-anchor="end">START</text>
          <text x="130" y="55">STOP</text>
          <path d="M 85,45 h 25 v -5 l 10,10 -10,10 v -5 h -25 z"/>
        </g>
      </svg>
    </div>
    <p class="caption">The text and arrow in the SVG fragment are filled
    with the same color as the inherited <a>'color'</a> property.</p>
  </div>
</div>
</div>

<h2 id="ColorProfileDescriptions">Color profile descriptions</h2>

  <h3 id="ColorProfileDescriptionsOverview">
    Overview of color profile descriptions</h3>
  <p>
    The <a href="http://www.color.org/">International Color Consortium</a> has established
    a standard, the ICC Profile [<a href="http://www.color.org/ICC-1A_1999-04.PDF">ICC32</a>],
    for documenting the color characteristics of input and output devices. Using these
    profiles, it is possible to build a transform and correct visual data for viewing
    on different devices.</p>
  <p>
    A <span class="SVG-Term">color profile description</span> provides the bridge between
    an ICC profile and references to that ICC profile within SVG content. The color
    profile description is added to the user agent's list of known color profiles and
    then used to select the relevant profile. The color profile description contains
    descriptors for the location of the color profile on the Web, a name to reference
    the profile and information about rendering intent.</p>

<h3 id="ColorProfileAlternatives">Alternative ways of defining a color profile description</h3>

<p>Color profile descriptions can be specified in either of the following ways:</p>

<ul>
  <li>a <a>'color-profile element'</a> element</li>

  <li>an <em>@color-profile</em> rule within a CSS style sheet </li>
</ul>


<p>If a color profile with the same <em>name</em> value has
been identified by both a <a>'color-profile element'</a> element and
<em>@color-profile</em> rules within a CSS style sheet, then
the user agent shall first attempt to locate the profile by
using the specifications in the <em>@color-profile</em> rules
first.</p>

<h3 id="ColorProfileElement">The <span class="element-name">'color-profile'</span> element</h3>

<p class="issue">The <a>'color-profile element'</a> element is going to be removed, as it is
redundant with the <strong>@color-profile</strong> rule.</p>

<edit:with element='color-profile'>

<edit:elementsummary name='color-profile'/>

    <div class="adef-list">
      <p><em>Attribute definitions:</em></p>
      <dl>
        <dt id="ColorProfileElementHrefAttribute"><span class="adef">href</span> = "<span
        class="attr-value"><a
        href="types.html#DataTypeIRI">&lt;iri&gt;</a></span>"</dt>
        <dd>The location of an ICC profile resource.<br />
         <span class="anim-target"><a
        href="animate.html#Animatable">Animatable</a>:
        no.</span></dd>

        <dt id="ColorProfileElementLocalAttribute"><span class="adef">local</span> =  sRGB | "<span
        class="attr-value">&lt;string&gt;</span>"</dt>
        <dd>The unique ID for a locally stored color profile.
        &lt;string&gt; is the profile's unique ID as specified by
        <a href="http://www.color.org/">International Color
        Consortium</a>.
          <div class="requirement" id="assert_sRGBCaseInsensitive">         
            When used in a style sheet,
            for consistency with <a href="http://www.w3.org/TR/CSS2/grammar.html">CSS lexical
              scanning and parsing rules</a>, the keyword "sRGB" MUST be case-insensitive. However,
            it is recommended that the mixed capitalization "sRGB" SHOULD be used for consistency
            with common industry practice.</div>
          <div class="requirement" id="assert_localColorProfilesFirst">
            If both the <a href="#ColorProfileElementHrefAttribute"><span class="attr-name">href</span></a>
            and the <span class="attr-name">local</span> attributes are specified, then the
            user agent MUST search the local system for the locally stored color profile first,
            and, if not available locally, then attempt to use the resource identified by the
            <a href="#ColorProfileElementHrefAttribute"><span class="attr-name">href</span></a>
            attribute.</div>
          (Note: Profile description fields do <em>not</em> represent a profile's unique ID.
          With current ICC proposals, the profile's unique ID is an MD5-encoded value within
          the profile header.).<br />
         <span class="anim-target"><a
        href="animate.html#Animatable">Animatable</a>:
        no.</span></dd>
        <dt id="ColorProfileElementNameAttribute"><span class="adef">name</span> = "<span
        class="attr-value">&lt;identifier&gt;</span>"</dt>
        <dd>The name which is used as the first parameter for <span
        class="prop-value">icc-color</span> specifications within
        <a>'fill'</a>, <a>'stroke'</a>, <a>'stop-color'</a>,
        <a>'flood-color'</a> and <a>'lighting-color'</a> property
        values to identify the color profile to use for the ICC
        color specification and the name which can be the value of
        the <a>'color-profile element'</a> property. Note
        that if 'name' is not provided, it will be impossible
        to reference the given color profile description. 
         <span class="anim-target"><a
        href="animate.html#Animatable">Animatable</a>:
        no.</span></dd>
        <dt id="ColorProfileElementRenderingIntentAttribute"><span class="adef">rendering-intent</span> = "<span
        class="attr-value">auto | perceptual |
        relative-colorimetric | saturation |
        absolute-colorimetric</span>"</dt>
        <dd>
          <p><a>'rendering-intent'</a>
          permits the specification of a color profile rendering
          intent other than the default. <a>'rendering-intent'</a> is applicable
          primarily to color profiles corresponding to CMYK color
          spaces. The different options cause different methods to
          be used for translating colors to the color gamut of the
          target rendering device:</p>
          <dl>
            <dt><span class='prop-value'>auto</span></dt>
            <dd>This is the default behavior. The user agent
            determines the best intent based on the content type.
              <div class="requirement" id="assert_renderingIntentAuto">
                For image content containing an embedded profile, the User Agent MUST use the intent
                specified within the profile. Otherwise, the user agent MUST use the current profile
                and force the intent, overriding any intent that might be stored in the profile
                itself.
              </div></dd>
            <dt><span class='prop-value'>perceptual</span></dt>
            <dd>            <p>This method is often the preferred choice for images, especially when
              there are substantial differences between the source and destination
              (such as a CRT display image reproduced on a reflection print). It takes
              the colors of the source image and re-optimizes the appearance for the
              destination medium using proprietary methods. This re-optimization may
              result in colors within both the source and destination gamuts being
              changed, although perceptual transforms are supposed to maintain the
              basic artistic intent of the original in the reproduction. They will not
              attempt to correct errors in the source image.
            </p>
              <p class="note">With v2 ICC profiles there is no specified perceptual reference
                medium, which can cause interoperability problems. When v2 ICC profiles
                are used it may be safer to use the media-relative colorimetric
                rendering intent with black point compensation, instead of the perceptual
                rendering intent, unless the specific source and destination profiles to
                be used have been checked to ensure the combination produces the desired
                result.
              </p>
              <div class="requirement" id="assert_renderingIntentPerceptual">
                This method SHOULD maintain relative color values among the pixels as they are mapped
                to the target device gamut. This method MAY change pixel values that were originally
                within the target device gamut, in order to avoid hue shifts and discontinuities
                and to preserve as much as possible the overall appearance of the scene.
              </div>
            </dd>
            <dt><span class='prop-value'>saturation</span></dt>
            <dd>            <p>This option was created to preserve the relative saturation (chroma) of
              the original, and to keep solid colors pure. However, it experienced
              interoperability problems like the perceptual intent, and as solid color
              preservation is not amenable to a reference medium solution using v4
              profiles does not solve the problem. Use of this rendering intent is <em>not
                recommended</em> unless the specific source and destination profiles to be
              used have been checked to ensure the combination produces the desired
              result.
            </p>
              <div class="requirement" id="assert_renderingIntentSaturation">
                This option SHOULD preserve the relative saturation (chroma) values of the original
                pixels. Out of gamut colors SHOULD be converted to colors that have the same saturation
                but fall just inside the gamut.
              </div></dd>
            <dt><span class='prop-value'>relative-colorimetric</span></dt>
            <dd>            <p>Media-relative colorimetric 
              is required to leave source colors that fall inside the destination
              medium gamut unchanged relative to the respective media white points.
              Source colors that are out of the destination medium gamut are mapped to
              colors on the gamut boundary using a variety of different methods.</p>
              
              <p class="note">Note: the media-relative colorimetric rendering intent is often used with
                black point compensation, where the source medium black point is mapped
                to the destination medium black point as well.</p>
              
              <div class="requirement" id="assert_renderingIntentRelativeColorimetric">
                This method MUST map the source white point to the desination white point.
                If black point compensation is in use, the source black point MUST also be mapped to the destination black point.
                Adaptation algorithms SHOULD be used to adjust for the change in white point. Relative relationships of colors inside
                both source and destination gamuts SHOULD be preserved. 
                Relative relationships of colors outside the destination gamut MAY be changed.
              </div></dd>
            <dt><span class='prop-value'>absolute-colorimetric</span></dt>
            <dd><p>ICC-absolute colorimetric  is
              required to leave source colors that fall inside the destination medium
              gamut unchanged relative to the adopted white (a perfect reflecting
              diffuser). Source colors that are out of the destination medium gamut
              are mapped to colors on the gamut boundary using a variety of different
              methods. This method produces the most accurate color matching of
              in-gamut colors, but will result in highlight clipping if the
              destination medium white point is lower than the source medium white
              point. For this reason it is recommended for use <em>only</em> in applications
              that need exact color matching and where highlight clipping is not a
              concern.
            </p>
              <div class="requirement" id="assert_renderingIntentAbsoluteColorimetric">
                This method MUST disable white point matching and black point matching when converting colors.
              </div>
              In general, this option is not recommended.</dd>
          </dl>
          <br />
           <span class="anim-target"><a
          href="animate.html#Animatable">Animatable</a>: no.</span>
        </dd>
      </dl>
    </div>
  <p class="issue">Fallback behaviour needs to be specified, for when the requested rendering intent does not have a corresponding table in the profile; or when all rendering-intents are provided using the same table.</p>
</edit:with>

<h3 id="ColorProfileAtRule">The CSS <strong>@color-profile</strong> rule</h3>

<p>When the document is styled using CSS, the CSS
<strong>@color-profile</strong> rule can be used to specify a color
profile description. The general form is:</p>

<pre>
@color-profile { &lt;color-profile-description&gt; }
</pre>

<p>where the &lt;color-profile-description&gt; has the form:</p>

<pre>
descriptor: value;
[...]
descriptor: value;
</pre>

<p>Each @color-profile rule specifies a value for every color
profile descriptor, either implicitly or explicitly. Those not
given explicit values in the rule take the initial value listed
with each descriptor in this specification. These descriptors
apply solely within the context of the @color-profile rule in
which they are defined, and do not apply to document language
elements. Thus, there is no notion of which elements the
descriptors apply to, or whether the values are inherited by
child elements.</p>

<p>The following are the descriptors for a &lt;color-profile-description&gt;:</p>

    <div class="propdef">
      <dl>
        <dt id="ColorProfileSrcProperty"><span class="descdef-title property">'src'</span></dt>
        <dd>
          <table
          class="propinfo" >
            <tr>
              <td><em>Values:</em></td>
              <td>sRGB | &lt;local-profile&gt; | <a
              href="types.html#DataTypeIRI">&lt;iri&gt;</a> |
              (&lt;local-profile&gt; <a
              href="types.html#DataTypeIRI">&lt;iri&gt;</a>) | <a
              class="noxref"
              href="http://www.w3.org/TR/2011/REC-CSS2-20110607/cascade.html#value-def-inherit">
              <span
              class="value-inst-inherit noxref">inherit</span></a></td>
            </tr>
            <tr>
              <td><em>Initial:</em></td>
              <td>sRGB</td>
            </tr>
            <tr>
              <td><em>Media:</em></td>
              <td>visual</td>
            </tr>
          </table>
        </dd>
      </dl>
    </div>

<dl>
  <dt><span class='prop-value'>sRGB</span></dt>
  <dd>The source profile is the sRGB color space. For
  consistency with
  <a href="http://www.w3.org/TR/2011/REC-CSS2-20110607/grammar.html#scanner">CSS lexical scanning and parsing rules</a>
  ([<a href="refs.html#ref-CSS21">CSS21</a>], section G.2), the keyword "sRGB" is
  case-insensitive; however, it is recommended that the mixed
  capitalization "sRGB" be used for consistency with common
  industry practice.</dd>

  <dt><span class='prop-value'>&lt;local-profile&gt;</span></dt>
  <dd>
    <p>The source profile is a locally-stored profile. The syntax
    for &lt;local-profile&gt; is:</p>

<pre>
"local(" + &lt;string&gt; + ")"
</pre>

    <p>where &lt;string&gt; is the profile's unique ID as
    specified by <a href="http://www.color.org/">International
    Color Consortium</a>. (Note: Profile description fields do
    <em>not</em> represent a profile's unique ID. With current
    ICC proposals, the profile's unique ID is an MD5-encoded
    value within the profile header.)</p>
  </dd>

  <dt><span class='prop-value'><a
  href="types.html#DataTypeIRI">&lt;iri&gt;</a></span></dt>
  <dd>The source profile is an <a>IRI reference</a>
  to a color profile.</dd>

  <dt>(<span class='prop-value'>&lt;local-profile&gt; <a
  href="types.html#DataTypeIRI">&lt;iri&gt;</a>)</span></dt>
  <dd>Two profiles are specified. If &lt;local-profile&gt;
  cannot be found on the local system, then the <a>&lt;iri&gt;</a>
  is used.</dd>
</dl>

    <div class="propdef">
      <dl>
        <dt id="ColorProfileNameProperty"><span class="descdef-title property">'name'</span></dt>
        <dd>
          <table
          class="propinfo" >
            <tr>
              <td><em>Values:</em></td>
              <td><a>&lt;identifier&gt;</a></td>
            </tr>
            <tr>
              <td><em>Initial:</em></td>
              <td>undefined</td>
            </tr>
            <tr>
              <td><em>Media:</em></td>
              <td>visual</td>
            </tr>
          </table>
        </dd>
      </dl>
    </div>

<dl>
  <dt><span class='prop-value'><a>&lt;identifier&gt;</a></span></dt>
  <dd>See the description for the <a>'color-profile/name'</a> attribute on the
  <a>'color-profile element'</a> element. Note that if 'name' is not
  provided, it will be impossible to reference the given @color-profile
  definition.</dd>
</dl>

    <div class="propdef">
      <dl>
        <dt id="RenderingIntentProperty"><span class="descdef-title property">'rendering-intent'</span></dt>
        <dd>
          <table
           class="propinfo" >
            <tr>
              <td><em>Values:</em></td>
              <td>auto | perceptual | relative-colorimetric |<br />
               saturation | absolute-colorimetric</td>
            </tr>
            <tr>
              <td><em>Initial:</em></td>
              <td>auto</td>
            </tr>
            <tr>
              <td><em>Media:</em></td>
              <td>visual</td>
            </tr>
            <tr>
              <td><em><a
              href="animate.html#Animatable">Animatable</a>:</em>&nbsp;&nbsp;</td>
              <td>no</td>
            </tr>
          </table>
        </dd>
      </dl>
    </div>

<p>See the description for the <a>'color-profile/rendering-intent'</a> attribute on the
<a>'color-profile element'</a> element.</p>
  
  
<div class="ready-for-wider-review">
<h2 id="syntax">Color syntax</h2>

<p>The EBNF grammar syntax is as described in <a href="types.html#syntax">Syntax</a>.</p>

<pre>
<span id="icccolor">icccolor</span> ::= 
  ~"icc-color(" <a href="#name">name</a> (<a href="#comma-wsp">comma-wsp</a> <a href="#number">number</a>)+ ")" 
  
<span id="iccnamedcolor">iccnamedcolor</span> ::= 
  ~"icc-named-color(" <a href="#name">name</a> <a href="#comma-wsp">comma-wsp</a> <a href="#namedColor">namedColor</a> ")" 
  
<span id="cielabcolor">cielabcolor</span> ::=
  ~"cielab(" <a href="#lightness">lightness</a> <a href="#comma-wsp">comma-wsp</a> <a href="#a-value">a-value</a> <a href="#comma-wsp">comma-wsp</a> <a href="#b-value">b-value</a> ")" 
  
<span id="cielchabcolor">cielchabcolor</span> ::=
  ~"cielchab(" <a href="#lightness">lightness</a> <a href="#comma-wsp">comma-wsp</a> <a href="#chroma">chroma</a> <a href="#comma-wsp">comma-wsp</a> <a href="#hue">hue</a> ")" 
  
<span id="devicecolor">devicecolor</span> ::=
  <a href="#devicegray">device-gray</a> | <a href="#devicergb">devicergb</a> | <a href="#devicecmyk">devicecmyk</a> | <a href="#devicenchannel">devicenchannel</a>
  
<span id="devicegray">devicegray</span> ::=
  ~"device-gray(" <a href="#gray">gray</a> ")"
  
<span id="devicergb">devicergb</span> ::=
  ~"device-rgb(" <a href="#red">red</a> <a href="#green">green</a> <a href="#blue">blue</a> ")"
  
<span id="devicecmyk">devicecmyk</span> ::=
  ~"device-cmyk(" <a href="#cyan">cyan</a> <a href="#magenta">magenta</a> <a href="#yellow">yellow</a> <a href="#black">black</a> ")"
  
<span id="devicenchannel">devicenchannel</span> ::=
  ~"device-nchannel(" <a href="#number">number</a>+ ")"
  
<span id="name">name</span> ::=
  <a href="#namestartchar">namestartchar</a> (<a href="#namechar">namechar</a>)*
  
<span id="lightness">lightness</span> ::=
  <a href="#number">number</a>
  
<span id="a-value">a-value</span> ::=
  <a href="#number">number</a>
  
<span id="b-value">b-value</span> ::=
  <a href="#number">number</a>
  
<span id="chroma">chroma</span> ::=
  <a href="#number">number</a>
  
<span id="hue">hue</span> ::=
  <a href="#number">number</a>
  
  
<span id="gray">gray</span> ::=
  <a href="#number">number</a>
  
<span id="red">red</span> ::=
  <a href="#number">number</a>
  
<span id="green">green</span> ::=
  <a href="#number">number</a>
  
<span id="blue">blue</span> ::=
  <a href="#number">number</a>
  
<span id="cyan">cyan</span> ::=
  <a href="#number">number</a>
  
<span id="magenta">magenta</span> ::=
  <a href="#number">number</a>
  
<span id="yellow">yellow</span> ::=
  <a href="#number">number</a>
  
<span id="black">black</span> ::=
  <a href="#number">number</a>
  
<span id="namedColor">namedColor</span> ::=
  <a href="#name">name</a>
  
<span id="fallback">fallback</span> ::=
  <a href="#color">color</a>
  
<span id="color">color</span>  ::= 
  "#" <a href="#hexdigit">hexdigit</a> <a href="#hexdigit">hexdigit</a> <a href="#hexdigit">hexdigit</a> (<a href="#hexdigit">hexdigit</a> <a href="#hexdigit">hexdigit</a> <a href="#hexdigit">hexdigit</a>)?
  | ~"rgb(" <a href="#wsp">wsp</a>* <a href="#integer">integer</a> <a href="#comma">comma</a> <a href="#integer">integer</a> <a href="#comma">comma</a> <a href="#integer">integer</a> <a href="#wsp">wsp</a>* ")"
  | ~"rgb(" <a href="#wsp">wsp</a>* <a href="#integer">integer</a> "%" <a href="#comma">comma</a> <a href="#integer">integer</a> "%" <a href="#comma">comma</a> <a href="#integer">integer</a> "%" <a href="#wsp">wsp</a>* ")"
  | ~"hsl(" <a href="#wsp">wsp</a>* <a href="#integer">integer</a> <a href="#comma">comma</a> <a href="#integer">integer</a> <a href="#comma">comma</a> <a href="#integer">integer</a> <a href="#wsp">wsp</a>* ")"
  | ~"hsla(" <a href="#wsp">wsp</a>* <a href="#integer">integer</a> <a href="#comma">comma</a> <a href="#integer">integer</a> <a href="#comma">comma</a> <a href="#integer">integer</a> <a href="#comma">comma</a> <a href="#integer">integer</a> <a href="#wsp">wsp</a>* ")"
  | <a href="#color-keyword">color-keyword</a>
  
<span id="hexdigit">hexdigit</span> ::= 
  [0-9A-Fa-f]
  
<span id="number">number</span> ::= 
  <a href="#sign">sign</a>? <a href="#digit-sequence">digit-sequence</a>? "." <a href="#digit-sequence">digit-sequence</a>
  
<span id="sign">sign</span>::=
  "+" | "-"
  
<span id="integer">integer</span> ::=
  <a href="#digit-sequence">digit-sequence</a>
  
<span id="digit-sequence">digit-sequence</span> ::=
  [0-9]+
  
<span id="namestartchar">namestartchar</span> ::=
  ":" | [A-Z] | "_" | [a-z] | [#xC0-#xD6] | [#xD8-#xF6] | [
  #xF8-#x2FF] | [#x370-#x37D] | [#x37F-#x1FFF] | [#x200C-#x200D] |
  [#x2070-#x218F] | [#x2C00-#x2FEF] | [#x3001-#xD7FF] |
  [#xF900-#xFDCF] | [#xFDF0-#xFFFD] | [#x10000-#xEFFFF]
   
<span id="namechar">namechar</span> ::=
  <a href="#namestartchar">namestartchar</a> | "-" | "." | [0-9] | #xB7 | [#x0300-#x036F] |
  [#x203F-#x2040]

  
<span id="comma-wsp">comma-wsp</span> ::=
  (<a href="#wsp">wsp</a>+ <a href="#comma">comma</a>? <a href="#wsp">wsp</a>*) | (<a href="#comma">comma</a> <a href="#wsp">wsp</a>*)
  
<span id="comma">comma</span> ::=
  ","
  
<span id="wsp">wsp</span> ::=
  (#x20 | #x9 | #xD | #xA)
  
<span id="color-keyword">color-keyword</span> ::=
  ~"aliceblue" | ~"antiquewhite" | ~"aqua" | ~"aquamarine" | ~"azure" | ~"beige" | 
  ~"bisque" | ~"black" | ~"blanchedalmond" | ~"blue" | ~"blueviolet" | ~"brown" | 
  ~"burlywood" |~"cadetblue" | ~"chartreuse" | ~"chocolate" | ~"coral" | ~"cornflowerblue" |
  ~"cornsilk" | ~"crimson" | ~"cyan" | ~"darkblue" | ~"darkcyan" | ~"darkgoldenrod" | 
  ~"darkgray" | ~"darkgreen" | ~"darkgrey" | ~"darkkhaki" | ~"darkmagenta" | ~"darkolivegreen" | 
  ~"darkorange" | ~"darkorchid" | ~"darkred" | ~"darksalmon" | ~"darkseagreen" | ~"darkslateblue" | 
  ~"darkslategray" | ~"darkslategrey" | ~"darkturquoise" | ~"darkviolet" | ~"deeppink" | ~"deepskyblue" | 
  ~"dimgray" | ~"dimgrey" | ~"dodgerblue" | ~"firebrick" | ~"floralwhite" | ~"forestgreen" | 
  ~"fuchsia" | ~"gainsboro" | ~"ghostwhite" | ~"gold" | ~"goldenrod" | ~"gray" | 
  ~"grey" | ~"green" | ~"greenyellow" | ~"honeydew" | ~"hotpink" | ~"indianred" | 
  ~"indigo" | ~"ivory" | ~"khaki" | ~"lavender" | ~"lavenderblush" | ~"lawngreen" | 
  ~"lemonchiffon" | ~"lightblue" | ~"lightcoral" | ~"lightcyan" | ~"lightgoldenrodyellow" | ~"lightgray" | 
  ~"lightgreen" | ~"lightgrey" | ~"lightpink" | ~"lightsalmon" | ~"lightseagreen" | ~"lightskyblue" | 
  ~"lightslategray" | ~"lightslategrey" | ~"lightsteelblue" | ~"lightyellow" | ~"lime" | 
  ~"limegreen" | ~"linen" | ~"magenta" | ~"maroon" | ~"mediumaquamarine" | ~"mediumblue" | 
  ~"mediumorchid" | ~"mediumpurple" | ~"mediumseagreen" | ~"mediumslateblue" | ~"mediumspringgreen" |
  ~"mediumturquoise" | ~"mediumvioletred" | ~"midnightblue" | ~"mintcream" | ~"mistyrose" |
  ~"moccasin" | ~"navajowhite" | ~"navy" | ~"oldlace" | ~"olive" | ~"olivedrab" | ~"orange" | ~"orangered" | 
  ~"orchid" | ~"palegoldenrod" | ~"palegreen" | ~"paleturquoise" | ~"palevioletred" | ~"papayawhip" | 
  ~"peachpuff" | ~"peru" | ~"pink" | ~"plum" | ~"powderblue" | ~"purple" | 
  ~"red" | ~"rosybrown" | ~"royalblue" | ~"saddlebrown" | ~"salmon" | ~"sandybrown" | 
  ~"seagreen" | ~"seashell" | ~"sienna" | ~"silver" | ~"skyblue" | ~"slateblue" | 
  ~"slategray" | ~"slategrey" | ~"snow" | ~"springgreen" | ~"steelblue" | ~"tan" | 
  ~"teal" | ~"thistle" | ~"tomato" | ~"turquoise" | ~"violet" | ~"wheat" | 
  ~"white" | ~"whitesmoke" | ~"yellow" | ~"yellowgreen" 
</pre>


</div>
 

<h2 id="DOMInterfaces">DOM interfaces</h2>

<h3 id="InterfaceSVGColorProfileElement">Interface SVGColorProfileElement</h3>


<edit:with element='color-profile'>

The <a>SVGColorProfileElement</a> interface corresponds to the
<a>'color-profile element'</a> element.
<pre class="idl">interface <b>SVGColorProfileElement</b> : <a class="idlinterface" href="types.html#InterfaceSVGElement">SVGElement</a> {
  attribute DOMString <a href="color.html#__svg__SVGColorProfileElement__local">local</a>;
  attribute DOMString <a href="color.html#__svg__SVGColorProfileElement__name">name</a>;
  attribute unsigned short <a href="color.html#__svg__SVGColorProfileElement__renderingIntent">renderingIntent</a>;
};

<a>SVGColorProfileElement</a> implements <a>SVGRenderingIntent</a>;
<a>SVGColorProfileElement</a> implements <a>SVGURIReference</a>;</pre>

<dl class="interface">
<dt class="attributes-header">Attributes:</dt>
<dd>
<dl class="attributes">

<dt id="__svg__SVGColorProfileElement__local" class="attribute first-child"><b>local</b><span class="idl-type-parenthetical"> (DOMString)</span></dt>
<dd class="attribute">
<div>
Corresponds to attribute <a>'local'</a> on the given element.


</div>
</dd>

<dt id="__svg__SVGColorProfileElement__name" class="attribute"><b>name</b><span class="idl-type-parenthetical"> (DOMString)</span></dt>
<dd class="attribute">
<div>
Corresponds to attribute <a>'name'</a> on the given element.


</div>
</dd>

<dt id="__svg__SVGColorProfileElement__renderingIntent" class="attribute"><b>renderingIntent</b><span class="idl-type-parenthetical"> (unsigned short)</span></dt>
<dd class="attribute">
<div>
Corresponds to attribute <a>'rendering-intent'</a> on the given element.
The value of this attribute is the value of the the RENDERING_INTENT_*
constant defined on <a>SVGRenderingIntent</a> that corresponds to the
value of the <a>'rendering-intent'</a> attribute.


</div>
</dd>
</dl>
</dd>
</dl>

</edit:with>


<h3 id="InterfaceSVGColorProfileRule">Interface SVGColorProfileRule</h3>



<p>The <a>SVGColorProfileRule</a> interface represents an @color-profile
rule in a CSS style sheet. An @color-profile rule identifies a ICC
profile which can be referenced within a given document.
</p>


<p>Support for the <a>SVGColorProfileRule</a> interface is only required
in user agents that support <a href="styling.html#StylingWithCSS">styling with CSS</a>.
</p>
<pre class="idl">interface <b>SVGColorProfileRule</b> : <a class="idlinterface" href="types.html#InterfaceSVGCSSRule">SVGCSSRule</a> {
  attribute DOMString <a href="color.html#__svg__SVGColorProfileRule__src">src</a>;
  attribute DOMString <a href="color.html#__svg__SVGColorProfileRule__name">name</a>;
  attribute unsigned short <a href="color.html#__svg__SVGColorProfileRule__renderingIntent">renderingIntent</a>;
};

<a>SVGColorProfileRule</a> implements <a>SVGRenderingIntent</a>;</pre>

<dl class="interface">
  <dt class="attributes-header">Attributes:</dt>
  <dd>
    <dl class="attributes">
      <dt id="__svg__SVGColorProfileRule__src" class="attribute first-child"><b>src</b><span class="idl-type-parenthetical"> (DOMString)</span></dt>
      <dd class="attribute">
        <div>
          Corresponds to descriptor <span class="property">src</span> within an
          @color-profile rule.
        </div>
      </dd>

      <dt id="__svg__SVGColorProfileRule__name" class="attribute"><b>name</b><span class="idl-type-parenthetical"> (DOMString)</span></dt>
      <dd class="attribute">
        <div>
          Corresponds to descriptor <span class="property">'name'</span> within an
          @color-profile rule.
        </div>
      </dd>

      <dt id="__svg__SVGColorProfileRule__renderingIntent" class="attribute"><b>renderingIntent</b><span class="idl-type-parenthetical"> (unsigned short)</span></dt>
      <dd class="attribute">
        <div>
          The type of rendering intent, identified by one of the
          <a>SVGRenderingIntent</a> constants.
        </div>
      </dd>
    </dl>
  </dd>
</dl>

</body>
</html>
